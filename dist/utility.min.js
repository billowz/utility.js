!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("utility",t):n.utility=t()}(this,function(){function n(n){var t=(new Date).getTime(),e=Math.max(0,16-(t-V)),r=setTimeout(function(){n(t+e)},e);return V=t+e,r}function t(n){clearTimeout(n)}function e(n,t,e){n.prototype[t]||(n.prototype[t]=e)}function r(n){l(n)&&(Z=n)}function i(){return Z}function o(n,t){return Z.call(n,t)}function c(n){return void 0!==n}function a(n){return null===n}function u(n){return void 0===n||null===n}function s(n){return Y.call(n)===tn}function l(n){return Y.call(n)===en}function f(n){return Y.call(n)===on}function p(n){return Y.call(n)===rn}function d(n){return Y.call(n)===cn}function h(n){return Y.call(n)===an}function g(n){return Y.call(n)===un}function v(n){return Y.call(n)===sn}function m(n){var t=Y.call(n);switch(t){case nn:case tn:case an:case ln:return!0;default:if(n){var e=n.length;return f(e)&&(e?e>0&&e-1 in n:0===e)}return!1}}function y(n,t,e,r){var i=void 0,c=void 0;e=e||n;for(i in n)if(c=o(n,i),(r===!1||c)&&t.call(e,n[i],i,n,c)===!1)return!1;return!0}function b(n,t,e){var r=0,i=n.length;for(e=e||n;r<i;r++)if(t.call(e,n[r],r,n,!0)===!1)return!1;return!0}function w(n,t,e,r){return m(n)?b(n,t,e):!!u(n)||y(n,t,e,r)}function O(n,t,e,r){function i(n,e){o[e]=t.apply(this,arguments)}var o=void 0;return m(n)?(o=[],b(n,i,e)):(o={},u(n)||y(n,i,e,r)),o}function j(n,t,e,r){var i=void 0;return m(n)?(i=[],b(n,function(n){t.apply(this,arguments)&&i.push(n)},e)):(i={},u(n)||y(n,function(n,e){t.apply(this,arguments)&&(i[e]=n)},e,r)),i}function x(n,t,e,r,i){var o=e;return w(n,function(n,e,r,i){o=t.call(this,o,n,e,r,i)},r,i),o}function A(n,t,e,r){var i=[];return w(n,function(n,e){t&&!t.apply(this,arguments)||i.push(e)},e,r),i}function F(n,t){for(var e=0,r=n.length;e<r;e++)if(n[e]===t)return e;return-1}function k(n,t){for(var e=n.length;e-- >0;)if(n[e]===t)return e}function C(n,t,e){for(key in n)if((e===!1||o(n,key))&&n[key]===t)return key}function _(n,t,e){return m(n)?F(n,t):C(n,t,e)}function E(n,t,e){return m(n)?k(n,t):C(n,t,e)}function P(n,t,e,r,i){var o={};return w(n,function(n,r){o[t?t.apply(this,arguments):r]=e?e.apply(this,arguments):n},r,i),o}function N(n,t,e,r){var i={};return w(n,function(n,e){i[n]=t?t.apply(this,arguments):e},e,r),i}function M(n){return n.toUpperCase()}function $(n){return n.replace(fn,M)}function L(n){return n.replace(pn,"")}function S(n){return n.replace(dn,"")}function q(n){return n.replace(hn,"")}function T(n,t,e,r){var i=n.length>=t?"":Array(1+t-n.length>>>0).join(e);return r?n+i:i+n}function z(n,t,e,r,i){var o=r-n.length;return o>0?e||!i?T(n,r," ",e):n.slice(0,t.length)+T("",o,"0",!0)+n.slice(t.length):n}function R(n){return D(n,Array.prototype.slice.call(arguments,1)).format}function D(n,t){var e=0;return n=n.replace(gn,function(n,r,i,o,c,a,u){if("%%"==n)return"%";var s=!1,l="",f=!1,p=!1;if(i&&w(i,function(n){switch(n){case" ":l=" ";break;case"+":l="+";break;case"-":s=!0;break;case"0":f=!0;break;case"#":p=!0}}),o=o?"*"==o?+t[e++]:"*"==o.charAt(0)?+t[o.slice(1,-1)]:+o:0,o<0&&(o=-o,s=!0),!isFinite(o))throw new Error("sprintf: (minimum-)width must be finite");a&&"*"==a.charAt(0)&&(a=+t["*"==a?e++:a.slice(1,-1)],a<0&&(a=null)),a=null==a?"fFeE".indexOf(u)>-1?6:"d"==u?0:void 0:+a;var d=r?t[r.slice(0,-1)]:t[e++],h=void 0,g=void 0;switch(u){case"c":d=String.fromCharCode(+d);case"s":d=String(d),null!=a&&(d=d.slice(0,a)),h="";break;case"b":g=2;break;case"o":g=8;break;case"u":g=10;break;case"x":case"X":g=16;break;case"i":case"d":var v=parseInt(+d);if(isNaN(v))return"";h=v<0?"-":l,d=h+T(String(Math.abs(v)),a,"0",!1);break;case"e":case"E":case"f":case"F":case"g":case"G":case"p":case"P":var m=+d;if(isNaN(m))return"";h=m<0?"-":l;var y=void 0;if("p"!=u.toLowerCase())y=["toExponential","toFixed","toPrecision"]["efg".indexOf(u.toLowerCase())];else{var b=String(d).replace(/[eE].*|[^\d]/g,"");b=(m?b.replace(/^0+/,""):b).length,a=a?Math.min(a,b):a,y=!a||a<=b?"toPrecision":"toExponential"}var O=Math.abs(m)[y](a);d=h+O;break;case"n":return"";default:return n}if(g){var j=d>>>0;h=p&&10!=g&&j&&["0b","0","0x"][g>>3]||"",d=h+T(j.toString(g),a||0,"0",!1)}var x=z(d,h,s,o,f);return"EFGPX".indexOf(u)>-1?x.toUpperCase():x}),{format:n,formatArgCount:e}}function H(n,t){if(s(n))return n;if(!h(n))return[];var e=function(){var e=vn[n];return e?{v:e}:(e=t?vn[n]=[]:[],n.replace(mn,function(n,t,r,i){e.push(r?i.replace(yn,"$1"):t||n)}),{v:e})}();return"object"==typeof e?e.v:void 0}function G(n,t,e,r,i){for(var c=0,a=H(t,!0),s=a.length-1,l=void 0;!u(n)&&c<s;){if(l=a[c++],i&&!o(n,l))return e;n=n[l]}return l=a[c],c==s&&!u(n)&&(i?o(n,l):l in n)?n[l]:e}function I(n,t,e,r){for(var i=0,c=H(t,!0),a=c.length-1,s=void 0;!u(n)&&i<a;){if(s=c[i++],r&&!o(n,s))return!1;n=n[s]}return s=c[i],i==a&&!u(n)&&(r?o(n,s):s in n)}function X(n,t,e){for(var r=0,i=H(t,!0),o=i.length-1,c=i[0],a=n;r<o;r++)a=u(a[c])?a[c]={}:a[c],c=i[r+1];return a[c]=e,n}function B(n,t){return o(n,t)?n[t]:void 0}function U(n){for(var t=void 0,e=void 0,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(e in t)o(t,e)&&!o(n,e)&&(n[e]=t[e])}return n}function J(){}function K(n,t){if(!l(n))return n instanceof t;for(var e=n;(e=bn(e))&&e!==Object;)if(e===t)return!0;return t===Object}function Q(n){var t=function(){this.constructor.apply(this,arguments)},e=n.extend,r=void 0,i=void 0;return On(t,xn),l(e)&&e!==Object||(e=xn),r=e.prototype,i=jn(r),t.superclass=r,t.prototype=i,wn(t,e),delete n.extend,t.extend(n)}var V=void 0,W={request:n,cancel:t};window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||W.request,window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||W.cancel,e(Function,"bind",function(n){var t=this,e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(n,e.concat(Array.prototype.slice.call(arguments)))}}),Object.freeze||(Object.freeze=function(n){return n});var Y=Object.prototype.toString,Z=Object.prototype.hasOwnProperty,nn="[object Arguments]",tn="[object Array]",en="[object Function]",rn="[object Boolean]",on="[object Number]",cn="[object Date]",an="[object String]",un="[object Object]",sn="[object RegExp]",ln="[object NodeList]",fn=/^[a-z]/,pn=/^\s+/,dn=/\s+$/,hn=/(^\s+)|(\s+$)/g,gn=/%%|%(\d+\$)?([-+#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuidfegpEGP])/g,vn={},mn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,yn=/\\(\\)?/g,bn=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__},wn=Object.setPrototypeOf||function(n,t){n.__proto__=t},On=Object.assign||function(n){for(var t=void 0,e=void 0,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(e in t)o(t,e)&&(n[e]=t[e])}return n},jn=Object.create||function(n,t){J.prototype=n;var e=new J;return J.prototype=void 0,t&&w(t,function(n,t){e[t]=n.value}),e},xn=function(){};On(xn.prototype,{super:function(n){var t=arguments.callee.caller;t.$owner.superclass[t.$name].apply(this,n)},superclass:function(){var n=arguments.callee.caller;return n.$owner.superclass}}),On(xn,{extend:function(n){var t=this;return n&&!function(){var e=t.prototype;w(n,function(n,r){l(n)&&(n.$owner=t,n.$name=r),e[r]=n}),t.assign(n.statics)}(),this},assign:function(n){return n&&On(this,n),this}});var An=Object.freeze({overrideHasOwnProlicy:r,hasOwnProlicy:i,hasOwnProp:o,isDefine:c,isNull:a,isNil:u,isArray:s,isFunc:l,isNumber:f,isBool:p,isDate:d,isString:h,isObject:g,isRegExp:v,isArrayLike:m,each:w,map:O,filter:j,aggregate:x,keys:A,indexOf:_,lastIndexOf:E,convert:P,reverseConvert:N,upperFirst:$,ltrim:L,rtrim:S,trim:q,format:R,_format:D,parseExpr:H,get:G,has:I,set:X,getOwnProp:B,prototypeOf:bn,setPrototypeOf:wn,assign:On,assignIf:U,emptyFunc:J,create:jn,isExtendOf:K,dynamicClass:Q}),Fn=Q({constructor:function(n){this.cfg=n||{}},register:function(n,t){var e=this;return 1==arguments.length?w(n,function(n,t){e.cfg[t]=n}):this.cfg[n]=t,this},config:function(n){var t=this;return n&&w(this.cfg,function(e,r){o(n,r)&&(t.cfg[r]=n[r])}),this},get:function(n){return arguments.length?this.cfg[n]:jn(this.cfg)}}),kn=["debug","info","warn","error"],Cn=document.createElement("div"),_n=Array.prototype.slice,En=Q({constructor:function(){Cn.innerHTML='<div id="simulation_console"\n    style="position:absolute; top:0; right:0; font-family:courier,monospace; background:#eee; font-size:10px; padding:10px; width:200px; height:200px;">\n  <a style="float:right; padding-left:1em; padding-bottom:.5em; text-align:right;">Clear</a>\n  <div id="simulation_console_body"></div>\n</div>',this.el=Cn.childNodes[0],this.clearEl=this.el.childNodes[0],this.bodyEl=this.el.childNodes[1]},appendTo:function(n){n.appendChild(this.el)},log:function(n,t){Cn.innerHTML='<span style="'+n+'">'+t+"</span>",this.bodyEl.appendChild(Cn.childNodes[0])},parseMsg:function(n){var t=n[0];if(h(t)){var e=D.apply(null,n);return[e.format].concat(_n.call(n,e.formatArgCount)).join(" ")}return n.join(" ")},debug:function(){this.log("color: red;",this.parseMsg(arguments))},info:function(){this.log("color: red;",this.parseMsg(arguments))},warn:function(){this.log("color: red;",this.parseMsg(arguments))},error:function(){this.log("color: red;",this.parseMsg(arguments))},clear:function(){this.bodyEl.innerHTML=""}}),Pn=window.console;Pn&&!Pn.debug&&(Pn.debug=function(){Function.apply.call(Pn.log,Pn,arguments)});var Nn=Q({statics:{enableSimulationConsole:function(){Pn||(Pn=new En,Pn.appendTo(document.body))}},constructor:function(n,t){this.module=n,this.level=_(kn,t||"info")},setLevel:function(n){this.level=_(kn,n||"info")},getLevel:function(){return kn[this.level]},_print:function(n,t,e){Function.apply.call(Pn[n],Pn,t),e&&Pn.trace&&Pn.trace()},_log:function(n,t,e){if(!(n<this.level)&&Pn){var r="[%s] %s -"+(h(t[0])?" "+t.shift():""),i=[];t=j(t,function(n){return!(n instanceof Error)||(i.push(n),!1)}),w(i,function(n){t.push.call(t,n.message,"\n",n.stack)}),n=kn[n],this._print(n,[r,n,this.module].concat(t),e)}},debug:function(){this._log(0,_n.call(arguments,0))},info:function(){this._log(1,_n.call(arguments,0))},warn:function(){this._log(2,_n.call(arguments,0))},error:function(){this._log(3,_n.call(arguments,0))}});Nn.logger=new Nn("default","info");var Mn=U({timeoutframe:W,Configuration:Fn,Logger:Nn},An);return Mn});
//# sourceMappingURL=utility.min.js.map