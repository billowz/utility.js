/*!
 * utility.js v0.0.5 built in Fri, 22 Jul 2016 07:28:31 GMT
 * Copyright (c) 2016 Tao Zeng <tao.zeng.zt@gmail.com>
 * Released under the MIT license
 * support IE6+ and other browsers
 * https://github.com/tao-zeng/utility.js
 */
!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.utility=t():n.utility=t()}(this,function(){return function(n){function t(r){if(e[r])return e[r].exports;var o=e[r]={exports:{},id:r,loaded:!1};return n[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var e={};return t.m=n,t.c=e,t.p="",t(0)}([function(n,t,e){e(1);var r=e(3);n.exports=r.assignIf(r,{timeoutframe:e(2),Configuration:e(4)},e(5))},function(n,t,e){function r(n,t,e){n.prototype[t]||(n.prototype[t]=e)}var o=e(2);window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||o.request,window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||o.cancel,r(Function,"bind",function(n){var t=this,e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(n,e.concat(Array.prototype.slice.call(arguments)))}})},function(n,t){function e(n){var t=(new Date).getTime(),e=Math.max(0,16-(t-o)),r=setTimeout(function(){n(t+e)},e);return o=t+e,r}function r(n){clearTimeout(n)}t.__esModule=!0,t.request=e,t.cancel=r;var o=void 0},function(n,t){function e(n,t){return V.call(n,t)}function r(n){return void 0===n}function o(n){return null===n}function i(n){return void 0===n||null===n}function c(n){return Q.call(n)===Y}function a(n){return Q.call(n)===Z}function u(n){return Q.call(n)===tn}function s(n){return NaN===n}function f(n){return Q.call(n)===nn}function l(n){return Q.call(n)===en}function p(n){return Q.call(n)===rn}function d(n){return Q.call(n)===on}function h(n){return Q.call(n)===cn}function g(n){var t=Q.call(n);switch(t){case W:case Y:case rn:case an:return!0;default:if(n){var e=n.length;return u(e)&&e>0&&e-1 in n}return!1}}function v(n,t,r,o){var i=void 0,c=void 0;r=r||n;for(i in n)if(c=e(n,i),(o===!1||c)&&t.call(r,n[i],i,n,c)===!1)return!1;return!0}function y(n,t,e){var r=0,o=n.length;for(e=e||n;r<o;r++)if(t.call(e,n[r],r,n,!0)===!1)return!1;return!0}function m(n,t,e,r){return g(n)?y(n,t,e):!!i(n)||v(n,t,e,r)}function b(n,t,e,r){function o(n,e){c[e]=t.apply(this,arguments)}var c=void 0;return g(n)?(c=[],y(n,o,e)):(c={},i(n)||v(n,o,e,r)),c}function w(n,t,e,r){var o=void 0;return g(n)?(o=[],y(n,function(n){t.apply(this,arguments)&&o.push(n)},e)):(o={},i(n)||v(n,function(n,e){t.apply(this,arguments)&&(o[e]=n)},e,r)),o}function x(n,t,e,r,o){var i=e;return m(n,function(n,e,r,o){i=t.call(this,i,n,e,r,o)},r,o),i}function j(n,t,e,r){var o=[];return m(n,function(n,e){t&&!t.apply(this,arguments)||o.push(e)},e,r),o}function O(n,t){for(var e=0,r=n.length;e<r;e++)if(n[e]===t)return e;return-1}function _(n,t){for(var e=n.length;e-- >0;)if(n[e]===t)return e}function A(n,t,r){for(key in n)if((r===!1||e(n,key))&&n[key]===t)return key}function F(n,t,e){return g(n)?O(n,t):A(n,t,e)}function C(n,t,e){return g(n)?_(n,t):A(n,t,e)}function k(n,t,e,r,o){var i={};return m(n,function(n,r){i[t?t.apply(this,arguments):r]=e?e.apply(this,arguments):n},r,o),i}function E(n,t,e,r){var o={};return m(n,function(n,e){o[n]=t?t.apply(this,arguments):e},e,r),o}function T(n){return n.toUpperCase()}function M(n){return n.replace(un,T)}function S(n){return n.replace(sn,"")}function N(n){return n.replace(fn,"")}function P(n){return n.replace(ln,"")}function L(n,t,e,r){var o=n.length>=t?"":Array(1+t-n.length>>>0).join(e);return r?n+o:o+n}function $(n,t,e,r,o){var i=r-n.length;return i>0?e||!o?L(n,r," ",e):n.slice(0,t.length)+L("",i,"0",!0)+n.slice(t.length):n}function q(n){return R(n,Array.prototype.slice.call(arguments,1)).format}function R(n,t){var e=0;return n=n.replace(pn,function(n,r,o,i,c,a,u){if("%%"==n)return"%";var f=!1,l="",p=!1,d=!1;if(o&&m(o,function(n){switch(n){case" ":l=" ";break;case"+":l="+";break;case"-":f=!0;break;case"0":p=!0;break;case"#":d=!0}}),i=i?"*"==i?+t[e++]:"*"==i.charAt(0)?+t[i.slice(1,-1)]:+i:0,i<0&&(i=-i,f=!0),!isFinite(i))throw new Error("sprintf: (minimum-)width must be finite");a&&"*"==a.charAt(0)&&(a=+t["*"==a?e++:a.slice(1,-1)],a<0&&(a=null)),a=null==a?"fFeE".indexOf(u)>-1?6:"d"==u?0:void 0:+a;var h=r?t[r.slice(0,-1)]:t[e++],g=void 0,v=void 0;switch(u){case"c":h=String.fromCharCode(+h);case"s":h=String(h),null!=a&&(h=h.slice(0,a)),g="";break;case"b":v=2;break;case"o":v=8;break;case"u":v=10;break;case"x":case"X":v=16;break;case"i":case"d":var y=parseInt(+h);if(s(y))return"";g=y<0?"-":l,h=g+L(String(Math.abs(y)),a,"0",!1);break;case"e":case"E":case"f":case"F":case"g":case"G":case"p":case"P":var b=+h;if(s(b))return"";g=b<0?"-":l;var w=void 0;if("p"!=u.toLowerCase())w=["toExponential","toFixed","toPrecision"]["efg".indexOf(u.toLowerCase())];else{var x=String(h).replace(/[eE].*|[^\d]/g,"");x=(b?x.replace(/^0+/,""):x).length,a=a?Math.min(a,x):a,w=!a||a<=x?"toPrecision":"toExponential"}var j=Math.abs(b)[w](a);h=g+j;break;case"n":return"";default:return n}if(v){var O=h>>>0;g=d&&10!=v&&O&&["0b","0","0x"][v>>3]||"",h=g+L(O.toString(v),a||0,"0",!1)}var _=$(h,g,f,i,p);return"EFGPX".indexOf(u)>-1?_.toUpperCase():_}),{format:n,formatArgCount:e}}function z(n,t){if(c(n))return n;if(!p(n))return[];var e=function(){var e=dn[n];return e?{v:e}:(e=t?dn[n]=[]:[],n.replace(hn,function(n,t,r,o){e.push(r?o.replace(gn,"$1"):t||n)}),{v:e})}();return"object"===("undefined"==typeof e?"undefined":K(e))?e.v:void 0}function D(n,t,r,o,c){for(var a=0,u=z(t,!0),s=u.length-1,f=void 0;!i(n)&&a<s;){if(f=u[a++],c&&!e(n,f))return r;n=n[f]}return f=u[a],a==s&&!i(n)&&(c?e(n,f):f in n)?n[f]:r}function I(n,t,r,o){for(var c=0,a=z(t,!0),u=a.length-1,s=void 0;!i(n)&&c<u;){if(s=a[c++],o&&!e(n,s))return!1;n=n[s]}return s=a[c],c==u&&!i(n)&&(o?e(n,s):s in n)}function G(n,t,e){for(var r=0,o=z(t,!0),c=o.length-1,a=o[0],u=n;r<c;r++)i(u[a])&&(u=u[a]={}),a=o[r+1];return n[a]=e,n}function H(n,t){return e(n,t)?n[t]:void 0}function X(n){for(var t=void 0,r=void 0,o=1,i=arguments.length;o<i;o++){t=arguments[o];for(r in t)e(t,r)&&!e(n,r)&&(n[r]=t[r])}return n}function B(){}function U(n,t){if(!a(n))return n instanceof t;for(var e=n;(e=vn(e))&&e!==Object;)if(e===t)return!0;return t===Object}function J(n){var t=function(){this.constructor.apply(this,arguments)},e=n.extend,r=void 0,o=void 0;return mn(t,wn),a(e)&&e!==Object||(e=wn),r=e.prototype,o=bn(r),t.superclass=o.superclass=r,t.prototype=o,yn(t,e),delete n.extend,t.extend(n)}t.__esModule=!0;var K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol?"symbol":typeof n};t.hasOwnProp=e,t.isDefine=r,t.isNull=o,t.isNil=i,t.isArray=c,t.isFunc=a,t.isNumber=u,t.isNaN=s,t.isBool=f,t.isDate=l,t.isString=p,t.isObject=d,t.isRegExp=h,t.isArrayLike=g,t.each=m,t.map=b,t.filter=w,t.aggregate=x,t.keys=j,t.indexOf=F,t.lastIndexOf=C,t.convert=k,t.reverseConvert=E,t.upperFirst=M,t.ltrim=S,t.rtrim=N,t.trim=P,t.format=q,t._format=R,t.parseExpr=z,t.get=D,t.has=I,t.set=G,t.getOwnProp=H,t.assignIf=X,t.emptyFunc=B,t.isExtendOf=U,t.dynamicClass=J;var Q=Object.prototype.toString,V=Object.prototype.hasOwnProperty,W=t.argsType="[object Arguments]",Y=t.arrayType="[object Array]",Z=t.funcType="[object Function]",nn=t.boolType="[object Boolean]",tn=t.numberType="[object Number]",en=t.dateType="[object Date]",rn=t.stringType="[object String]",on=t.objectType="[object Object]",cn=t.regexpType="[object RegExp]",an=t.nodeListType="[object NodeList]",un=/^[a-z]/,sn=/^\s+/,fn=/\s+$/,ln=/(^\s+)|(\s+$)/g,pn=/%%|%(\d+\$)?([-+#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuidfegpEGP])/g,dn={},hn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,gn=/\\(\\)?/g,vn=t.prototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__},yn=t.setPrototypeOf=Object.setPrototypeOf||function(n,t){n.__proto__=t},mn=Object.assign||function(n){for(var t=void 0,r=void 0,o=1,i=arguments.length;o<i;o++){t=arguments[o];for(r in t)e(t,r)&&(n[r]=t[r])}return n};t.assign=mn;var bn=t.create=Object.create||function(n,t){B.prototype=n;var e=new B;return B.prototype=void 0,t&&m(t,function(n,t){e[t]=n.value}),e},wn=function(){};mn(wn.prototype,{"super":function(n){var t=arguments.callee.caller;if(!t)throw new Error("method is undefined on super class");t.$owner.superclass[t.$name].apply(this,n)}}),mn(wn,{extend:function(n){var t=this;return n&&!function(){var e=t.prototype;m(n,function(n,r){a(n)&&(n.$owner=t,n.$name=r),e[r]=n}),t.assign(n.statics)}(),this},assign:function(n){return n&&mn(this,n),this}})},function(n,t,e){var r=e(3),o=r.dynamicClass({constructor:function(n){this.cfg=n||{}},register:function(n,t){var e=this;return 1==arguments.length?r.each(n,function(n,t){e.cfg[t]=n}):this.cfg[n]=t,this},config:function(n){var t=this;return n&&r.each(this.cfg,function(e,o){r.hasOwnProp(n,o)&&(t.cfg[o]=n[o])}),this},get:function(n){return arguments.length?this.cfg[n]:r.create(this.cfg)}});n.exports=o},function(n,t,e){t.__esModule=!0;var r=e(3),o=["debug","info","warn","error"],i=document.createElement("div"),c=Array.prototype.slice,a=r.dynamicClass({constructor:function(){i.innerHTML='<div id="simulation_console"\n    style="position:absolute; top:0; right:0; font-family:courier,monospace; background:#eee; font-size:10px; padding:10px; width:200px; height:200px;">\n  <a style="float:right; padding-left:1em; padding-bottom:.5em; text-align:right;">Clear</a>\n  <div id="simulation_console_body"></div>\n</div>',this.el=i.childNodes[0],this.clearEl=this.el.childNodes[0],this.bodyEl=this.el.childNodes[1]},appendTo:function(n){n.appendChild(this.el)},log:function(n,t){i.innerHTML='<span style="'+n+'">'+t+"</span>",this.bodyEl.appendChild(i.childNodes[0])},parseMsg:function(n){var t=n[0];if(r.isString(t)){var e=r._format.apply(r,n);return[e.format].concat(c.call(n,e.formatArgCount)).join(" ")}return n.join(" ")},debug:function(){this.log("color: red;",this.parseMsg(arguments))},info:function(){this.log("color: red;",this.parseMsg(arguments))},warn:function(){this.log("color: red;",this.parseMsg(arguments))},error:function(){this.log("color: red;",this.parseMsg(arguments))},clear:function(){this.bodyEl.innerHTML=""}}),u=window.console;u&&!u.debug&&(u.debug=function(){Function.apply.call(u.log,u,arguments)});var s=t.Logger=r.dynamicClass({constructor:function(n,t){this.module=n,this.level=r.indexOf(o,t||"info")},setLevel:function(n){this.level=r.indexOf(o,n||"info")},getLevel:function(){return o[this.level]},_print:function(n,t,e){Function.apply.call(u[n],u,t),e&&u.trace&&u.trace()},_log:function(n,t,e){if(!(n<this.level)&&u){var i="[%s] %s -"+(r.isString(t[0])?" "+t.shift():""),c=[];t=r.filter(t,function(n){return!(n instanceof Error)||(c.push(n),!1)}),r.each(c,function(n){t.push.call(t,n.message,"\n",n.stack)}),n=o[n],this._print(n,[i,n,this.module].concat(t),e)}},debug:function(){this._log(0,c.call(arguments,0))},info:function(){this._log(1,c.call(arguments,0))},warn:function(){this._log(2,c.call(arguments,0))},error:function(){this._log(3,c.call(arguments,0))}});s.enableSimulationConsole=function(){u||(u=new a,u.appendTo(document.body))};t.logger=new s("default","info")}])});