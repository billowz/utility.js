/*!
 * utility.js v0.0.3 built in Thu, 21 Jul 2016 10:44:17 GMT
 * Copyright (c) 2016 Tao Zeng <tao.zeng.zt@gmail.com>
 * Released under the MIT license
 * support IE6+ and other browsers
 * https://github.com/tao-zeng/utility.js
 */
!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.utility=n():t.utility=n()}(this,function(){return function(t){function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){"use strict";e(1);var r=e(3);t.exports=r.assignIf(r,{timeoutframe:e(2),Configuration:e(4)},e(5))},function(t,n,e){"use strict";function r(t,n,e){t.prototype[n]||(t.prototype[n]=e)}var o=e(2);window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||o.request,window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||o.cancel,r(Function,"bind",function(t){var n=this,e=Array.prototype.slice.call(arguments,1);return function(){return n.apply(t,e.concat(Array.prototype.slice.call(arguments)))}})},function(t,n){"use strict";function e(t){var n=(new Date).getTime(),e=Math.max(0,16-(n-o)),r=setTimeout(function(){t(n+e)},e);return o=n+e,r}function r(t){clearTimeout(t)}n.__esModule=!0,n.request=e,n.cancel=r;var o=void 0},function(t,n){"use strict";function e(t,n){return tt.call(t,n)}function r(t){return void 0===t}function o(t){return null===t}function i(t){return void 0===t||null===t}function c(t){return Z.call(t)===et}function a(t){return Z.call(t)===rt}function u(t){return Z.call(t)===it}function s(t){return NaN===t}function f(t){return Z.call(t)===ot}function l(t){return Z.call(t)===ct}function p(t){return Z.call(t)===at}function d(t){return Z.call(t)===ut}function h(t){return Z.call(t)===st}function g(t){var n=Z.call(t);switch(n){case nt:case et:case at:case ft:return!0;default:if(t){var e=t.length;return u(e)&&e>0&&e-1 in t}return!1}}function v(t,n,r,o){var i=void 0,c=void 0;r=r||t;for(i in t)if(c=e(t,i),(o===!1||c)&&n.call(r,t[i],i,t,c)===!1)return!1;return!0}function y(t,n,e){var r=0,o=t.length;for(e=e||t;r<o;r++)if(n.call(e,t[r],r,t,!0)===!1)return!1;return!0}function m(t,n,e,r){return g(t)?y(t,n,e):!!i(t)||v(t,n,e,r)}function b(t,n,e,r){function o(t,e){c[e]=n.apply(this,arguments)}var c=void 0;return g(t)?(c=[],y(t,o,e)):(c={},i(t)||v(t,o,e,r)),c}function w(t,n,e,r){var o=void 0;return g(t)?(o=[],y(t,function(t){n.apply(this,arguments)&&o.push(t)},e)):(o={},i(t)||v(t,function(t,e){n.apply(this,arguments)&&(o[e]=t)},e,r)),o}function x(t,n,e,r,o){var i=e;return m(t,function(t,e,r,o){i=n.call(this,i,t,e,r,o)},r,o),i}function j(t,n,e,r){var o=[];return m(t,function(t,e){n&&!n.apply(this,arguments)||o.push(e)},e,r),o}function O(t,n){for(var e=0,r=t.length;e<r;e++)if(t[e]===n)return e;return-1}function _(t,n){for(var e=t.length;e-- >0;)if(t[e]===n)return e}function A(t,n,r){for(key in t)if((r===!1||e(t,key))&&t[key]===n)return key}function C(t,n,e){return g(t)?O(t,n):A(t,n,e)}function F(t,n,e){return g(t)?_(t,n):A(t,n,e)}function k(t,n,e,r,o){var i={};return m(t,function(t,r){i[n?n.apply(this,arguments):r]=e?e.apply(this,arguments):t},r,o),i}function E(t,n,e,r){var o={};return m(t,function(t,e){o[t]=n?n.apply(this,arguments):e},e,r),o}function T(t){return t.toUpperCase()}function M(t){return t.replace(lt,T)}function S(t){return t.replace(pt,"")}function N(t){return t.replace(dt,"")}function P(t){return t.replace(ht,"")}function L(t,n,e,r){var o=t.length>=n?"":Array(1+n-t.length>>>0).join(e);return r?t+o:o+t}function q(t,n,e,r,o){var i=r-t.length;return i>0?e||!o?L(t,r," ",e):t.slice(0,n.length)+L("",i,"0",!0)+t.slice(n.length):t}function R(t){return $(t,Array.prototype.slice.call(arguments,1)).format}function $(t,n){var e=0;return t=t.replace(gt,function(t,r,o,i,c,a,u){if("%%"==t)return"%";var f=!1,l="",p=!1,d=!1;if(o&&m(o,function(t){switch(t){case" ":l=" ";break;case"+":l="+";break;case"-":f=!0;break;case"0":p=!0;break;case"#":d=!0}}),i=i?"*"==i?+n[e++]:"*"==i.charAt(0)?+n[i.slice(1,-1)]:+i:0,i<0&&(i=-i,f=!0),!isFinite(i))throw new Error("sprintf: (minimum-)width must be finite");a&&"*"==a.charAt(0)&&(a=+n["*"==a?e++:a.slice(1,-1)],a<0&&(a=null)),a=null==a?"fFeE".indexOf(u)>-1?6:"d"==u?0:void 0:+a;var h=r?n[r.slice(0,-1)]:n[e++],g=void 0,v=void 0;switch(u){case"c":h=String.fromCharCode(+h);case"s":h=String(h),null!=a&&(h=h.slice(0,a)),g="";break;case"b":v=2;break;case"o":v=8;break;case"u":v=10;break;case"x":case"X":v=16;break;case"i":case"d":var y=parseInt(+h);if(s(y))return"";g=y<0?"-":l,h=g+L(String(Math.abs(y)),a,"0",!1);break;case"e":case"E":case"f":case"F":case"g":case"G":case"p":case"P":var b=+h;if(s(b))return"";g=b<0?"-":l;var w=void 0;if("p"!=u.toLowerCase())w=["toExponential","toFixed","toPrecision"]["efg".indexOf(u.toLowerCase())];else{var x=String(h).replace(/[eE].*|[^\d]/g,"");x=(b?x.replace(/^0+/,""):x).length,a=a?Math.min(a,x):a,w=!a||a<=x?"toPrecision":"toExponential"}var j=Math.abs(b)[w](a);h=g+j;break;case"n":return"";default:return t}if(v){var O=h>>>0;g=d&&10!=v&&O&&["0b","0","0x"][v>>3]||"",h=g+L(O.toString(v),a||0,"0",!1)}var _=q(h,g,f,i,p);return"EFGPX".indexOf(u)>-1?_.toUpperCase():_}),{format:t,formatArgCount:e}}function I(t,n){if(c(t))return t;if(!p(t))return[];var e=function(){var e=vt[t];return e?{v:e}:(e=n?vt[t]=[]:[],t.replace(yt,function(t,n,r,o){e.push(r?o.replace(mt,"$1"):n||t)}),{v:e})}();return"object"===("undefined"==typeof e?"undefined":Y(e))?e.v:void 0}function z(t,n,r,o,c){for(var a=0,u=I(n,!0),s=u.length-1,f=void 0;!i(t)&&a<s;){if(f=u[a++],c&&!e(t,f))return r;t=t[f]}return f=u[a],a==s&&!i(t)&&(c?e(t,f):f in t)?t[f]:r}function D(t,n,r,o){for(var c=0,a=I(n,!0),u=a.length-1,s=void 0;!i(t)&&c<u;){if(s=a[c++],o&&!e(t,s))return!1;t=t[s]}return s=a[c],c==u&&!i(t)&&(o?e(t,s):s in t)}function G(t,n,e){for(var r=0,o=I(n,!0),c=o.length-1,a=o[0],u=t;r<c;r++)i(u[a])&&(u=u[a]={}),a=o[r+1];return t[a]=e,t}function H(t,n){return e(t,n)?t[n]:void 0}function X(t){for(var n=void 0,r=void 0,o=1,i=arguments.length;o<i;o++){n=arguments[o];for(r in n)e(n,r)&&!e(t,r)&&(t[r]=n[r])}return t}function B(){}function U(t,n){if(!a(t))return t instanceof n;for(var e=t;(e=bt(e))&&e!==Object;)if(e===n)return!0;return n===Object}function J(t,n,e){var r=t[n];return p(r)?r:e}function K(t,n){var e=t[n];return delete t[n],a(e)?e:Object.prototype.constructor}function Q(t,n){var e=t[n];return delete t[n],a(e)?e:Object}function V(t,n){var e=t[n];return delete t[n],d(e)?e:void 0}function W(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],e=void 0,r=void 0,o=void 0,i=void 0;if(!d(t))throw TypeError("Invalid Class Config: "+t);return e=K(t,J(n,"constructor","constructor")),r=Q(t,J(n,"extend","extend")),o=V(t,J(n,"statics","statics")),i=function(t,n,e){function r(){return this.constructor.apply(this,arguments)}var o=jt(n.prototype);return o.constructor=t,o["super"]=n.prototype,m(e,function(t,n){o[n]=t}),r.prototype=o,wt(r,n),r}(e,r,t),o&&xt(i,o),i}n.__esModule=!0;var Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};n.hasOwnProp=e,n.isDefine=r,n.isNull=o,n.isNil=i,n.isArray=c,n.isFunc=a,n.isNumber=u,n.isNaN=s,n.isBool=f,n.isDate=l,n.isString=p,n.isObject=d,n.isRegExp=h,n.isArrayLike=g,n.each=m,n.map=b,n.filter=w,n.aggregate=x,n.keys=j,n.indexOf=C,n.lastIndexOf=F,n.convert=k,n.reverseConvert=E,n.upperFirst=M,n.ltrim=S,n.rtrim=N,n.trim=P,n.format=R,n._format=$,n.parseExpr=I,n.get=z,n.has=D,n.set=G,n.getOwnProp=H,n.assignIf=X,n.emptyFunc=B,n.isExtendOf=U,n.dynamicClass=W;var Z=Object.prototype.toString,tt=Object.prototype.hasOwnProperty,nt=n.argsType="[object Arguments]",et=n.arrayType="[object Array]",rt=n.funcType="[object Function]",ot=n.boolType="[object Boolean]",it=n.numberType="[object Number]",ct=n.dateType="[object Date]",at=n.stringType="[object String]",ut=n.objectType="[object Object]",st=n.regexpType="[object RegExp]",ft=n.nodeListType="[object NodeList]",lt=/^[a-z]/,pt=/^\s+/,dt=/\s+$/,ht=/(^\s+)|(\s+$)/g,gt=/%%|%(\d+\$)?([-+#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuidfegpEGP])/g,vt={},yt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,mt=/\\(\\)?/g,bt=n.prototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__},wt=n.setPrototypeOf=Object.setPrototypeOf||function(t,n){t.__proto__=n},xt=n.assign=Object.assign||function(t){for(var n=void 0,r=void 0,o=1,i=arguments.length;o<i;o++){n=arguments[o];for(r in n)e(n,r)&&(t[r]=n[r])}return t},jt=n.create=Object.create||function(t,n){B.prototype=t;var e=new B;return B.prototype=void 0,n&&m(n,function(t,n){e[n]=t.value}),e}},function(t,n,e){"use strict";var r=e(3),o=r.dynamicClass({constructor:function(t){this.cfg=t||{}},register:function(t,n){var e=this;return 1==arguments.length?r.each(t,function(t,n){e.cfg[n]=t}):this.cfg[t]=n,this},config:function(t){var n=this;return t&&r.each(this.cfg,function(e,o){r.hasOwnProp(t,o)&&(n.cfg[o]=t[o])}),this},get:function(t){return arguments.length?this.cfg[t]:r.create(this.cfg)}});t.exports=o},function(t,n,e){"use strict";n.__esModule=!0;var r=e(3),o=["debug","info","warn","error"],i=document.createElement("div"),c=Array.prototype.slice,a=r.dynamicClass({constructor:function(){i.innerHTML='<div id="simulation_console"\n    style="position:absolute; top:0; right:0; font-family:courier,monospace; background:#eee; font-size:10px; padding:10px; width:200px; height:200px;">\n  <a style="float:right; padding-left:1em; padding-bottom:.5em; text-align:right;">Clear</a>\n  <div id="simulation_console_body"></div>\n</div>',this.el=i.childNodes[0],this.clearEl=this.el.childNodes[0],this.bodyEl=this.el.childNodes[1]},appendTo:function(t){t.appendChild(this.el)},log:function(t,n){i.innerHTML='<span style="'+t+'">'+n+"</span>",this.bodyEl.appendChild(i.childNodes[0])},parseMsg:function(t){var n=t[0];if(r.isString(n)){var e=r._format.apply(r,t);return[e.format].concat(c.call(t,e.formatArgCount)).join(" ")}return t.join(" ")},debug:function(){this.log("color: red;",this.parseMsg(arguments))},info:function(){this.log("color: red;",this.parseMsg(arguments))},warn:function(){this.log("color: red;",this.parseMsg(arguments))},error:function(){this.log("color: red;",this.parseMsg(arguments))},clear:function(){this.bodyEl.innerHTML=""}}),u=window.console;u&&!u.debug&&(u.debug=function(){u.log.apply(this,arguments)});var s=n.Logger=r.dynamicClass({constructor:function(t,n){this.module=t,this.level=r.indexOf(o,n||"info")},setLevel:function(t){this.level=r.indexOf(o,t||"info")},getLevel:function(){return o[this.level]},_print:function(t,n,e){u[t].apply(u,n),e&&u.trace&&u.trace()},_log:function(t,n,e){if(!(t<this.level)&&u){var i="[%s] %s -"+(r.isString(n[0])?" "+n.shift():""),c=[];n=r.filter(n,function(t){return!(t instanceof Error)||(c.push(t),!1)}),r.each(c,function(t){n.push.call(n,t.message,"\n",t.stack)}),t=o[t],this._print(t,[i,t,this.module].concat(n),e)}},debug:function(){this._log(0,c.call(arguments,0))},info:function(){this._log(1,c.call(arguments,0))},warn:function(){this._log(2,c.call(arguments,0))},error:function(){this._log(3,c.call(arguments,0))}});s.enableSimulationConsole=function(){u||(u=new a,u.appendTo(document.body))};n.logger=new s("default","info")}])});