!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("utility",e):t.utility=e()}(this,function(){function t(t){var e=(new Date).getTime(),n=Math.max(0,16-(e-et)),r=setTimeout(function(){t(e+n)},n);return et=e+n,r}function e(t){clearTimeout(t)}function n(t,e,n){t.prototype[e]||(t.prototype[e]=n)}function r(t,e){ot[t]=e}function i(t){return ot[t]}function o(t,e){return ot.eq(t,e)}function s(t,e){return ot.hasOwn(t,e)}function a(t){if(null===t||void 0===t)return!0;var e=rt.call(t);switch(e){case ut:case lt:case ht:case ct:return!0}return!1}function c(t){return void 0!==t}function u(t){return null===t}function l(t){return void 0===t||null===t}function f(t){return rt.call(t)===at}function h(t){return rt.call(t)===ct}function p(t){return rt.call(t)===lt}function d(t){return rt.call(t)===ut}function v(t){return rt.call(t)===ft}function g(t){return rt.call(t)===ht}function m(t){return rt.call(t)===pt}function _(t){return rt.call(t)===dt}function y(t){var e=rt.call(t);switch(e){case st:case at:case ht:case vt:return!0;default:if(t){var n=t.length;return p(n)&&(n?n>0&&n-1 in t:0===n)}return!1}}function b(t,e,n,r){var i=void 0,o=void 0;n=n||t;for(i in t)if(o=s(t,i),(r===!1||o)&&e.call(n,t[i],i,t,o)===!1)return!1;return!0}function w(t,e,n){var r=0,i=t.length;for(n=n||t;r<i;r++)if(e.call(n,t[r],r,t,!0)===!1)return!1;return!0}function j(t,e,n,r){return y(t)?w(t,e,n):!!l(t)||b(t,e,n,r)}function O(t,e,n,r){function i(t,n){o[n]=e.apply(this,arguments)}var o=void 0;return y(t)?(o=[],w(t,i,n)):(o={},l(t)||b(t,i,n,r)),o}function x(t,e,n,r){var i=void 0;return y(t)?(i=[],w(t,function(t){e.apply(this,arguments)&&i.push(t)},n)):(i={},l(t)||b(t,function(t,n){e.apply(this,arguments)&&(i[n]=t)},n,r)),i}function $(t,e,n,r,i){var o=n;return j(t,function(t,n,r,i){o=e.call(this,o,t,n,r,i)},r,i),o}function A(t,e,n,r){var i=[];return j(t,function(t,n){e&&!e.apply(this,arguments)||i.push(n)},n,r),i}function k(t,e,n,r){var i=[];return j(t,function(t,n){e&&!e.apply(this,arguments)||i.push(t)},n,r),i}function C(t,e){for(var n=0,r=t.length;n<r;n++)if(o(t[n],e))return n;return-1}function F(t,e){for(var n=t.length;n-- >0;)if(o(t[n],e))return n}function z(t,e,n){for(key in t)if((n===!1||s(t,key))&&o(t[key],e))return key}function E(t,e,n){return y(t)?C(t,e):z(t,e,n)}function L(t,e,n){return y(t)?F(t,e):z(t,e,n)}function N(t,e,n,r,i){var o={};return j(t,function(t,r){o[e?e.apply(this,arguments):r]=n?n.apply(this,arguments):t},r,i),o}function P(t,e,n,r){var i={};return j(t,function(t,n){i[t]=e?e.apply(this,arguments):n},n,r),i}function q(t){return t.toUpperCase()}function T(t){return t.replace(gt,q)}function M(t){return t.replace(mt,"")}function D(t){return t.replace(_t,"")}function S(t){return t.replace(yt,"")}function Z(t){var e=(t+"").split(".");return e[0]=e[0].replace(bt,"$1,"),e.join(".")}function I(t){for(var e=void 0,n=0;n<4;n++)if(e=wt[n],e.reg.test(t))return t.replace(e.reg,e.rep);return t}function R(t){for(var e=void 0,n=0;n<4;n++)if(e=jt[n],e.reg.test(t))return t.replace(e.reg,e.rep);return t}function K(t,e){if(f(t))return t;if(!g(t))return[];var n=function(){var n=Ot[t];return n?{v:n}:(n=e?Ot[t]=[]:[],t.replace(xt,function(t,e,r,i){n.push(r?i.replace($t,"$1"):e||t)}),{v:n})}();return"object"==typeof n?n.v:void 0}function U(t,e,n,r,i){for(var o=0,a=K(e,!0),c=a.length-1,u=void 0;!l(t)&&o<c;){if(u=a[o++],i&&!s(t,u))return n;t=t[u]}return u=a[o],o==c&&!l(t)&&(i?s(t,u):u in t)?t[u]:n}function G(t,e,n,r){for(var i=0,o=K(e,!0),a=o.length-1,c=void 0;!l(t)&&i<a;){if(c=o[i++],r&&!s(t,c))return!1;t=t[c]}return c=o[i],i==a&&!l(t)&&(r?s(t,c):c in t)}function H(t,e,n){for(var r=0,i=K(e,!0),o=i.length-1,s=i[0],a=t;r<o;r++)a=l(a[s])?a[s]={}:a[s],s=i[r+1];return a[s]=n,t}function X(t,e){return s(t,e)?t[e]:void 0}function B(t){for(var e=void 0,n=void 0,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(n in e)s(e,n)&&!s(t,n)&&(t[n]=e[n])}return t}function Y(){}function J(t,e){if(!h(t))return t instanceof e;for(var n=t;(n=At(n))&&n!==Object;)if(n===e)return!0;return e===Object}function Q(t){var e=function(){this.constructor.apply(this,arguments)},n=t.extend,r=void 0,i=void 0;return Ct(e,zt),h(n)&&n!==Object||(n=zt),r=n.prototype,i=Ft(r),e.superclass=r,e.prototype=i,kt(e,n),delete t.extend,e.extend(t)}function V(t,e,n,r){var i=t.length,o=i>=e?"":Array(1+e-i>>>0).join(n);return r?t+o:o+t}function W(t,e){function n(t){return t=t?"*"==t?+e[i++]:"$"==t?+e[i]:"$"==t.charAt(t.length-1)?+e[t.slice(0,-1)-1]:+t:0,isFinite(t)?t<0?0:t:0}function r(t){return t&&"*"!=t?"$"==t?e[i]:e[t.slice(0,-1)-1]:e[i++]}var i=0;return t=t.replace(Pt,function(t,e,i,o,s,a){if("%"===a)return"%";var c=r(e);o=n(o),s=s&&n(s.slice(1)),s||0===s||(s="fFeE".indexOf(a)==-1?"d"==a?0:void 0:6);var u=!1,f="",h=!1,p=!1,d=!1,v=void 0,g=void 0;switch(i&&j(i,function(t){switch(t){case" ":case"+":f=t;break;case"-":u=!0;break;case"0":h=!0;break;case"#":p=!0;break;case",":d=!0}}),a){case"c":return String.fromCharCode(+c);case"s":return l(c)&&!isNaN(c)?"":(c+="",s&&c.length>s&&(c=c.slice(0,s)),c.length<o&&(c=V(c,o,h?"0":" ",!1)),c);case"d":return c=parseInt(c),isNaN(c)?"":(c<0?(v="-",c=-c):v=f,c+="",c.length<o&&(c=V(c,o,"0",!1)),d&&(c=c.replace(qt,"$1,")),v+c);case"e":case"E":case"f":case"g":case"G":case"p":case"P":var m=+c;if(isNaN(m))return"";m<0?(v="-",m=-m):v=f;var _=void 0,y=a.toLowerCase();if("p"!=y)_=["toExponential","toFixed","toPrecision"]["efg".indexOf(y)];else{var b=String(c).replace(/[eE].*|[^\d]/g,"");b=(m?b.replace(/^0+/,""):b).length,s&&(s=Math.min(s,b)),_=!s||s<=b?"toPrecision":"toExponential"}if(m=m[_](s),m.length<o&&(m=V(m,o,"0",!1)),d){var w=m.split(".");w[0]=w[0].replace(qt,"$1,"),m=w.join(".")}return c=v+m,"EGP".indexOf(a)!=-1?c.toUpperCase():c;case"b":g=2;break;case"o":g=8;break;case"u":g=10;break;case"x":case"X":g=16;break;case"n":return"";default:return t}var O=c>>>0;return v=p&&10!=g&&O&&["0b","0","0x"][g>>3]||"",O=O.toString(g),O.length<o&&(O=V(O,o,"0",!1)),c=v+O,"X"==a?c.toUpperCase():c}),{format:t,count:i}}function tt(t){return W(t,Array.prototype.slice.call(arguments,1)).format}var et=void 0,nt={request:t,cancel:e};window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||nt.request,window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||nt.cancel,n(Function,"bind",function(t){var e=this,n=Array.prototype.slice.call(arguments,1);return function(){return e.apply(t,n.concat(Array.prototype.slice.call(arguments)))}}),Object.freeze||(Object.freeze=function(t){return t});var rt=Object.prototype.toString,it=Object.prototype.hasOwnProperty,ot={hasOwn:function(t,e){return it.call(t,e)},eq:function(t,e){return t===e}},st="[object Arguments]",at="[object Array]",ct="[object Function]",ut="[object Boolean]",lt="[object Number]",ft="[object Date]",ht="[object String]",pt="[object Object]",dt="[object RegExp]",vt="[object NodeList]",gt=/^[a-z]/,mt=/^\s+/,_t=/\s+$/,yt=/(^\s+)|(\s+$)/g,bt=/(\d)(?=(\d{3})+(?!\d))/g,wt=[{reg:/([a-zA-Z]+[^aeiou])y$/,rep:"$1ies"},{reg:/([a-zA-Z]+[aeiou]y)$/,rep:"$1s"},{reg:/([a-zA-Z]+[sxzh])$/,rep:"$1es"},{reg:/([a-zA-Z]+[^sxzhy])$/,rep:"$1s"}],jt=[{reg:/([a-zA-Z]+[^aeiou])ies$/,rep:"$1y"},{reg:/([a-zA-Z]+[aeiou])s$/,rep:"$1"},{reg:/([a-zA-Z]+[sxzh])es$/,rep:"$1"},{reg:/([a-zA-Z]+[^sxzhy])s$/,rep:"$1"}],Ot={},xt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,$t=/\\(\\)?/g,At=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__},kt=Object.setPrototypeOf||function(t,e){t.__proto__=e},Ct=Object.assign||function(t){for(var e=void 0,n=void 0,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(n in e)s(e,n)&&(t[n]=e[n])}return t},Ft=Object.create||function(t,e){Y.prototype=t;var n=new Y;return Y.prototype=void 0,e&&j(e,function(t,e){n[e]=t.value}),n},zt=function(){},Et=[];Ct(zt.prototype,{super:function(t){var e=arguments.callee.caller;e.$owner.superclass[e.$name].apply(this,t||Et)},superclass:function(){var t=arguments.callee.caller;return t.$owner.superclass}}),Ct(zt,{extend:function(t){var e=this;if(t){var n=this.prototype;j(t,function(t,r){h(t)&&(t.$owner=e,t.$name=r),n[r]=t}),this.assign(t.statics)}return this},assign:function(t){return t&&Ct(this,t),this}});var Lt=Object.freeze({overridePolicy:r,policy:i,eq:o,hasOwnProp:s,isPrimitive:a,isDefine:c,isNull:u,isNil:l,isArray:f,isFunc:h,isNumber:p,isBool:d,isDate:v,isString:g,isObject:m,isRegExp:_,isArrayLike:y,each:j,map:O,filter:x,aggregate:$,keys:A,values:k,indexOf:E,lastIndexOf:L,convert:N,reverseConvert:P,upperFirst:T,ltrim:M,rtrim:D,trim:S,thousandSeparate:Z,plural:I,singular:R,parseExpr:K,get:U,has:G,set:H,getOwnProp:X,prototypeOf:At,setPrototypeOf:kt,assign:Ct,assignIf:B,emptyFunc:Y,create:Ft,isExtendOf:J,dynamicClass:Q}),Nt=Q({constructor:function(t){this.cfg=t||{}},register:function(t,e){var n=this;return 1==arguments.length?j(t,function(t,e){n.cfg[e]=t}):this.cfg[t]=e,this},config:function(t){var e=this;return t&&j(this.cfg,function(n,r){s(t,r)&&(e.cfg[r]=t[r])}),this},get:function(t){return arguments.length?this.cfg[t]:Ft(this.cfg)}}),Pt=/%(\d+\$|\*|\$)?([-+#0, ]*)?(\d+\$?|\*|\$)?(\.\d+\$?|\.\*|\.\$)?([%sfducboxXeEgGpP])/g,qt=/(\d)(?=(\d{3})+(?!\d))/g;tt.format=W;var Tt=["debug","info","warn","error"],Mt=document.createElement("div"),Dt=Array.prototype.slice,St=Q({constructor:function(){Mt.innerHTML='<div id="simulation_console"\n    style="position:absolute; top:0; right:0; font-family:courier,monospace; background:#eee; font-size:10px; padding:10px; width:200px; height:200px;">\n  <a style="float:right; padding-left:1em; padding-bottom:.5em; text-align:right;">Clear</a>\n  <div id="simulation_console_body"></div>\n</div>',this.el=Mt.childNodes[0],this.clearEl=this.el.childNodes[0],this.bodyEl=this.el.childNodes[1]},appendTo:function(t){t.appendChild(this.el)},log:function(t,e){Mt.innerHTML='<span style="'+t+'">'+e+"</span>",this.bodyEl.appendChild(Mt.childNodes[0])},parseMsg:function(t){var e=t[0];if(g(e)){var n=tt.format.apply(null,t);return[n.format].concat(Dt.call(t,n.count)).join(" ")}return t.join(" ")},debug:function(){this.log("color: red;",this.parseMsg(arguments))},info:function(){this.log("color: red;",this.parseMsg(arguments))},warn:function(){this.log("color: red;",this.parseMsg(arguments))},error:function(){this.log("color: red;",this.parseMsg(arguments))},clear:function(){this.bodyEl.innerHTML=""}}),Zt=window.console;Zt&&!Zt.debug&&(Zt.debug=function(){Function.apply.call(Zt.log,Zt,arguments)});var It=Q({statics:{enableSimulationConsole:function(){Zt||(Zt=new St,Zt.appendTo(document.body))}},constructor:function(t,e){this.module=t,this.level=E(Tt,e||"info")},setLevel:function(t){this.level=E(Tt,t||"info")},getLevel:function(){return Tt[this.level]},_print:function(t,e,n){Function.apply.call(Zt[t],Zt,e),n&&Zt.trace&&Zt.trace()},_log:function(t,e,n){if(!(t<this.level)&&Zt){var r="[%s] %s -"+(g(e[0])?" "+e.shift():""),i=[];e=x(e,function(t){return!(t instanceof Error)||(i.push(t),!1)}),j(i,function(t){e.push.call(e,t.message,"\n",t.stack)}),t=Tt[t],this._print(t,[r,t,this.module].concat(e),n)}},debug:function(){this._log(0,Dt.call(arguments,0))},info:function(){this._log(1,Dt.call(arguments,0))},warn:function(){this._log(2,Dt.call(arguments,0))},error:function(){this._log(3,Dt.call(arguments,0))}});It.logger=new It("default","info");var Rt=1,Kt=Q({statics:{ListKey:"__UTILITY_LIST__"},constructor:function(){this._id=Rt++,this.length=0,this._header=void 0,this._tail=void 0,this._version=1},_listObj:function(t){return s(t,Kt.ListKey)&&t[Kt.ListKey]},_desc:function(t){var e=this._listObj(t);return e&&e[this._id]},_getOrCreateDesc:function(t){var e=this._listObj(t)||(t[Kt.ListKey]={}),n=e[this._id];return n||(e[this._id]={obj:t,prev:void 0,next:void 0,version:this._version++})},_unlink:function(t){var e=t.prev,n=t.next;e?e.next=n:this._header=n,n?n.prev=e:this._tail=e,this.length--},_move:function(t,e,n){var r=this._header;(r===t||t.prev)&&this._unlink(t),t.prev=e,e?(t.next=e.next,e.next=t):(t.next=r,r&&(r.prev=t),this._header=t),this._tail===e&&(this._tail=t),this.length++},_remove:function(t){var e=t.obj,n=this._listObj(e);this._unlink(t),delete n[this._id]},push:function(t){return this.last(t)},pop:function(){var t=this._header;if(t)return this._remove(t),t.obj},shift:function(){var t=this._tail;if(t)return this._remove(t),t.obj},first:function(t){if(0==arguments.length){var e=this._header;return e&&e.obj}return this._move(this._getOrCreateDesc(t),void 0),this},last:function(t){if(0==arguments.length){var e=this._tail;return e&&e.obj}return this._move(this._getOrCreateDesc(t),this._tail),this},before:function(t,e){if(1==arguments.length){var n=this._desc(t),r=n&&n.prev;return r&&r.obj}return this._move(this._getOrCreateDesc(t),this._desc(e).prev),this},after:function(t,e){if(1==arguments.length){var n=this._desc(t),r=n&&n.next;return r&&r.obj}return this._move(this._getOrCreateDesc(t),this._desc(e)),this},contains:function(t){return!!this._desc(t)},remove:function(t){var e=this._listObj(t),n=void 0;return!(!e||!(n=e[this._id]))&&(this._unlink(n),delete e[this._id],!0)},clean:function(){for(var t=this._header;t;)delete this._listObj(t.obj)[this._id],t=t.next;return this._header=void 0,this._tail=void 0,this.length=0,this},empty:function(){return 0==this.length},size:function(){return this.length},each:function(t,e){for(var n=this._header,r=this._version;n;){if(n.version<r&&t.call(e||this,n.obj,this)===!1)return!1;n=n.next}return!0},map:function(t,e){var n=this,r=[];return this.each(function(i){r.push(t.call(e||n,i,n))}),r},filter:function(t,e){var n=this,r=[];return this.each(function(i){t.call(e||n,i,n)&&r.push(i)}),r},toArray:function(){var t=[];return this.each(function(e){t.push(e)}),t}}),Ut=B({format:tt,timeoutframe:nt,Configuration:Nt,Logger:It,LinkedList:Kt},Lt);return Ut});
//# sourceMappingURL=utility.min.js.map