!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define("utility",n):t.utility=n()}(this,function(){function t(t){var n=(new Date).getTime(),e=Math.max(0,16-(n-Q)),i=setTimeout(function(){t(n+e)},e);return Q=n+e,i}function n(t){clearTimeout(t)}function e(t,n,e){t.prototype[n]||(t.prototype[n]=e)}function i(t){f(t)&&(Z=t)}function r(){return Z}function o(t,n){return Z.call(t,n)}function s(t){return void 0!==t}function c(t){return null===t}function a(t){return void 0===t||null===t}function u(t){return W.call(t)===nt}function f(t){return W.call(t)===et}function l(t){return W.call(t)===rt}function h(t){return W.call(t)===it}function d(t){return W.call(t)===ot}function p(t){return W.call(t)===st}function v(t){return W.call(t)===ct}function g(t){return W.call(t)===at}function m(t){var n=W.call(t);switch(n){case tt:case nt:case st:case ut:return!0;default:if(t){var e=t.length;return l(e)&&(e?e>0&&e-1 in t:0===e)}return!1}}function _(t,n,e,i){var r=void 0,s=void 0;e=e||t;for(r in t)if(s=o(t,r),(i===!1||s)&&n.call(e,t[r],r,t,s)===!1)return!1;return!0}function b(t,n,e){var i=0,r=t.length;for(e=e||t;i<r;i++)if(n.call(e,t[i],i,t,!0)===!1)return!1;return!0}function y(t,n,e,i){return m(t)?b(t,n,e):!!a(t)||_(t,n,e,i)}function w(t,n,e,i){function r(t,e){o[e]=n.apply(this,arguments)}var o=void 0;return m(t)?(o=[],b(t,r,e)):(o={},a(t)||_(t,r,e,i)),o}function j(t,n,e,i){var r=void 0;return m(t)?(r=[],b(t,function(t){n.apply(this,arguments)&&r.push(t)},e)):(r={},a(t)||_(t,function(t,e){n.apply(this,arguments)&&(r[e]=t)},e,i)),r}function O(t,n,e,i,r){var o=e;return y(t,function(t,e,i,r){o=n.call(this,o,t,e,i,r)},i,r),o}function x(t,n,e,i){var r=[];return y(t,function(t,e){n&&!n.apply(this,arguments)||r.push(e)},e,i),r}function k(t,n){for(var e=0,i=t.length;e<i;e++)if(t[e]===n)return e;return-1}function A(t,n){for(var e=t.length;e-- >0;)if(t[e]===n)return e}function C(t,n,e){for(key in t)if((e===!1||o(t,key))&&t[key]===n)return key}function F(t,n,e){return m(t)?k(t,n):C(t,n,e)}function E(t,n,e){return m(t)?A(t,n):C(t,n,e)}function L(t,n,e,i,r){var o={};return y(t,function(t,i){o[n?n.apply(this,arguments):i]=e?e.apply(this,arguments):t},i,r),o}function z(t,n,e,i){var r={};return y(t,function(t,e){r[t]=n?n.apply(this,arguments):e},e,i),r}function P(t){return t.toUpperCase()}function N(t){return t.replace(ft,P)}function M(t){return t.replace(lt,"")}function T(t){return t.replace(ht,"")}function $(t){return t.replace(dt,"")}function S(t,n,e,i){var r=t.length>=n?"":Array(1+n-t.length>>>0).join(e);return i?t+r:r+t}function D(t,n,e,i,r){var o=i-t.length;return o>0?e||!r?S(t,i," ",e):t.slice(0,n.length)+S("",o,"0",!0)+t.slice(n.length):t}function q(t){return I(t,Array.prototype.slice.call(arguments,1)).format}function I(t,n){var e=0;return t=t.replace(pt,function(t,i,r,o,s,c,a){if("%%"==t)return"%";var u=!1,f="",l=!1,h=!1;if(r&&y(r,function(t){switch(t){case" ":f=" ";break;case"+":f="+";break;case"-":u=!0;break;case"0":l=!0;break;case"#":h=!0}}),o=o?"*"==o?+n[e++]:"*"==o.charAt(0)?+n[o.slice(1,-1)]:+o:0,o<0&&(o=-o,u=!0),!isFinite(o))throw new Error("sprintf: (minimum-)width must be finite");c&&"*"==c.charAt(0)&&(c=+n["*"==c?e++:c.slice(1,-1)],c<0&&(c=null)),c=null==c?"fFeE".indexOf(a)>-1?6:"d"==a?0:void 0:+c;var d=i?n[i.slice(0,-1)]:n[e++],p=void 0,v=void 0;switch(a){case"c":d=String.fromCharCode(+d);case"s":d=String(d),null!=c&&(d=d.slice(0,c)),p="";break;case"b":v=2;break;case"o":v=8;break;case"u":v=10;break;case"x":case"X":v=16;break;case"i":case"d":var g=parseInt(+d);if(isNaN(g))return"";p=g<0?"-":f,d=p+S(String(Math.abs(g)),c,"0",!1);break;case"e":case"E":case"f":case"F":case"g":case"G":case"p":case"P":var m=+d;if(isNaN(m))return"";p=m<0?"-":f;var _=void 0;if("p"!=a.toLowerCase())_=["toExponential","toFixed","toPrecision"]["efg".indexOf(a.toLowerCase())];else{var b=String(d).replace(/[eE].*|[^\d]/g,"");b=(m?b.replace(/^0+/,""):b).length,c=c?Math.min(c,b):c,_=!c||c<=b?"toPrecision":"toExponential"}var w=Math.abs(m)[_](c);d=p+w;break;case"n":return"";default:return t}if(v){var j=d>>>0;p=h&&10!=v&&j&&["0b","0","0x"][v>>3]||"",d=p+S(j.toString(v),c||0,"0",!1)}var O=D(d,p,u,o,l);return"EFGPX".indexOf(a)>-1?O.toUpperCase():O}),{format:t,formatArgCount:e}}function R(t,n){if(u(t))return t;if(!p(t))return[];var e=function(){var e=vt[t];return e?{v:e}:(e=n?vt[t]=[]:[],t.replace(gt,function(t,n,i,r){e.push(i?r.replace(mt,"$1"):n||t)}),{v:e})}();return"object"==typeof e?e.v:void 0}function H(t,n,e,i,r){for(var s=0,c=R(n,!0),u=c.length-1,f=void 0;!a(t)&&s<u;){if(f=c[s++],r&&!o(t,f))return e;t=t[f]}return f=c[s],s==u&&!a(t)&&(r?o(t,f):f in t)?t[f]:e}function K(t,n,e,i){for(var r=0,s=R(n,!0),c=s.length-1,u=void 0;!a(t)&&r<c;){if(u=s[r++],i&&!o(t,u))return!1;t=t[u]}return u=s[r],r==c&&!a(t)&&(i?o(t,u):u in t)}function G(t,n,e){for(var i=0,r=R(n,!0),o=r.length-1,s=r[0],c=t;i<o;i++)c=a(c[s])?c[s]={}:c[s],s=r[i+1];return c[s]=e,t}function U(t,n){return o(t,n)?t[n]:void 0}function X(t){for(var n=void 0,e=void 0,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(e in n)o(n,e)&&!o(t,e)&&(t[e]=n[e])}return t}function B(){}function Y(t,n){if(!f(t))return t instanceof n;for(var e=t;(e=_t(e))&&e!==Object;)if(e===n)return!0;return n===Object}function J(t){var n=function(){this.constructor.apply(this,arguments)},e=t.extend,i=void 0,r=void 0;return yt(n,jt),f(e)&&e!==Object||(e=jt),i=e.prototype,r=wt(i),n.superclass=i,n.prototype=r,bt(n,e),delete t.extend,n.extend(t)}var Q=void 0,V={request:t,cancel:n};window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||V.request,window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||V.cancel,e(Function,"bind",function(t){var n=this,e=Array.prototype.slice.call(arguments,1);return function(){return n.apply(t,e.concat(Array.prototype.slice.call(arguments)))}}),Object.freeze||(Object.freeze=function(t){return t});var W=Object.prototype.toString,Z=Object.prototype.hasOwnProperty,tt="[object Arguments]",nt="[object Array]",et="[object Function]",it="[object Boolean]",rt="[object Number]",ot="[object Date]",st="[object String]",ct="[object Object]",at="[object RegExp]",ut="[object NodeList]",ft=/^[a-z]/,lt=/^\s+/,ht=/\s+$/,dt=/(^\s+)|(\s+$)/g,pt=/%%|%(\d+\$)?([-+#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuidfegpEGP])/g,vt={},gt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,mt=/\\(\\)?/g,_t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__},bt=Object.setPrototypeOf||function(t,n){t.__proto__=n},yt=Object.assign||function(t){for(var n=void 0,e=void 0,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(e in n)o(n,e)&&(t[e]=n[e])}return t},wt=Object.create||function(t,n){B.prototype=t;var e=new B;return B.prototype=void 0,n&&y(n,function(t,n){e[n]=t.value}),e},jt=function(){};yt(jt.prototype,{super:function(t){var n=arguments.callee.caller;n.$owner.superclass[n.$name].apply(this,t)},superclass:function(){var t=arguments.callee.caller;return t.$owner.superclass}}),yt(jt,{extend:function(t){var n=this;return t&&!function(){var e=n.prototype;y(t,function(t,i){f(t)&&(t.$owner=n,t.$name=i),e[i]=t}),n.assign(t.statics)}(),this},assign:function(t){return t&&yt(this,t),this}});var Ot=Object.freeze({overrideHasOwnProlicy:i,hasOwnProlicy:r,hasOwnProp:o,isDefine:s,isNull:c,isNil:a,isArray:u,isFunc:f,isNumber:l,isBool:h,isDate:d,isString:p,isObject:v,isRegExp:g,isArrayLike:m,each:y,map:w,filter:j,aggregate:O,keys:x,indexOf:F,lastIndexOf:E,convert:L,reverseConvert:z,upperFirst:N,ltrim:M,rtrim:T,trim:$,format:q,_format:I,parseExpr:R,get:H,has:K,set:G,getOwnProp:U,prototypeOf:_t,setPrototypeOf:bt,assign:yt,assignIf:X,emptyFunc:B,create:wt,isExtendOf:Y,dynamicClass:J}),xt=J({constructor:function(t){this.cfg=t||{}},register:function(t,n){var e=this;return 1==arguments.length?y(t,function(t,n){e.cfg[n]=t}):this.cfg[t]=n,this},config:function(t){var n=this;return t&&y(this.cfg,function(e,i){o(t,i)&&(n.cfg[i]=t[i])}),this},get:function(t){return arguments.length?this.cfg[t]:wt(this.cfg)}}),kt=["debug","info","warn","error"],At=document.createElement("div"),Ct=Array.prototype.slice,Ft=J({constructor:function(){At.innerHTML='<div id="simulation_console"\n    style="position:absolute; top:0; right:0; font-family:courier,monospace; background:#eee; font-size:10px; padding:10px; width:200px; height:200px;">\n  <a style="float:right; padding-left:1em; padding-bottom:.5em; text-align:right;">Clear</a>\n  <div id="simulation_console_body"></div>\n</div>',this.el=At.childNodes[0],this.clearEl=this.el.childNodes[0],this.bodyEl=this.el.childNodes[1]},appendTo:function(t){t.appendChild(this.el)},log:function(t,n){At.innerHTML='<span style="'+t+'">'+n+"</span>",this.bodyEl.appendChild(At.childNodes[0])},parseMsg:function(t){var n=t[0];if(p(n)){var e=I.apply(null,t);return[e.format].concat(Ct.call(t,e.formatArgCount)).join(" ")}return t.join(" ")},debug:function(){this.log("color: red;",this.parseMsg(arguments))},info:function(){this.log("color: red;",this.parseMsg(arguments))},warn:function(){this.log("color: red;",this.parseMsg(arguments))},error:function(){this.log("color: red;",this.parseMsg(arguments))},clear:function(){this.bodyEl.innerHTML=""}}),Et=window.console;Et&&!Et.debug&&(Et.debug=function(){Function.apply.call(Et.log,Et,arguments)});var Lt=J({statics:{enableSimulationConsole:function(){Et||(Et=new Ft,Et.appendTo(document.body))}},constructor:function(t,n){this.module=t,this.level=F(kt,n||"info")},setLevel:function(t){this.level=F(kt,t||"info")},getLevel:function(){return kt[this.level]},_print:function(t,n,e){Function.apply.call(Et[t],Et,n),e&&Et.trace&&Et.trace()},_log:function(t,n,e){if(!(t<this.level)&&Et){var i="[%s] %s -"+(p(n[0])?" "+n.shift():""),r=[];n=j(n,function(t){return!(t instanceof Error)||(r.push(t),!1)}),y(r,function(t){n.push.call(n,t.message,"\n",t.stack)}),t=kt[t],this._print(t,[i,t,this.module].concat(n),e)}},debug:function(){this._log(0,Ct.call(arguments,0))},info:function(){this._log(1,Ct.call(arguments,0))},warn:function(){this._log(2,Ct.call(arguments,0))},error:function(){this._log(3,Ct.call(arguments,0))}});Lt.logger=new Lt("default","info");var zt=1,Pt=J({statics:{ListKey:"__UTILITY_LIST__"},constructor:function(){this._id=zt++,this._size=0,this._header=void 0,this._tail=void 0,this._version=1},_listObj:function(t){return o(t,Pt.ListKey)&&t[Pt.ListKey]},_desc:function(t){var n=this._listObj(t);return n&&n[this._id]},_getOrCreateDesc:function(t){var n=this._listObj(t)||(t[Pt.ListKey]={}),e=n[this._id];return e||(n[this._id]={obj:t,prev:void 0,next:void 0,version:this._version++})},_unlink:function(t){var n=t.prev,e=t.next;n?n.next=e:this._header=e,e?e.prev=n:this._tail=n,this._size--},_move:function(t,n){var e=this._header;(e===t||t.prev)&&this._unlink(t),t.prev=n,n?(t.next=n.next,n.next=t):(t.next=e,e&&(e.prev=t),this._header=t),this._tail===n&&(this._tail=t),this._size++},_remove:function(t){var n=t.obj,e=this._listObj(n);this._unlink(t),delete e[this._id]},push:function(t){return this.last(t)},pop:function(){var t=this._header;if(t)return this._remove(t),t.obj},shift:function(){var t=this._tail;if(t)return this._remove(t),t.obj},first:function(t){if(0==arguments.length){var n=this._header;return n&&n.obj}return this._move(this._getOrCreateDesc(t),void 0),this},last:function(t){if(0==arguments.length){var n=this._tail;return n&&n.obj}return this._move(this._getOrCreateDesc(t),this._tail),this},before:function(t,n){if(1==arguments.length){var e=this._desc(t),i=e&&e.prev;return i&&i.obj}return this._move(this._getOrCreateDesc(t),this._desc(n).prev),this},after:function(t,n){if(1==arguments.length){var e=this._desc(t),i=e&&e.next;return i&&i.obj}return this._move(this._getOrCreateDesc(t),this._desc(n)),this},contains:function(t){return!!this._desc(t)},remove:function(t){var n=this._listObj(t),e=void 0;if(n&&(e=n[this._id]))return this._unlink(e),delete n[this._id],this},empty:function(){return this._header=void 0,this._tail=void 0,this._size=0,this},isEmpty:function(){return 0==this._size},size:function(){return this._size},each:function(t,n){for(var e=this._header,i=this._version;e;){if(e.version<i&&t.call(n||this,e.obj,this)===!1)return!1;e=e.next}return!0},map:function(t,n){var e=this,i=[];return this.each(function(r){i.push(t.call(n||e,r,e))}),i},filter:function(t,n){var e=this,i=[];return this.each(function(r){t.call(n||e,r,e)&&i.push(r)}),i},toArray:function(){var t=[];return this.each(function(n){t.push(n)}),t}}),Nt=X({timeoutframe:V,Configuration:xt,Logger:Lt,LinkedList:Pt},Ot);return Nt});
//# sourceMappingURL=utility.min.js.map