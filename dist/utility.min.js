!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define("utility",n):t.utility=n()}(this,function(){function t(t){var n=(new Date).getTime(),e=Math.max(0,16-(n-V)),i=setTimeout(function(){t(n+e)},e);return V=n+e,i}function n(t){clearTimeout(t)}function e(t,n,e){t.prototype[n]||(t.prototype[n]=e)}function i(t){f(t)&&(tt=t)}function r(){return tt}function o(t,n){return tt.call(t,n)}function c(t){if(null===t||void 0===t)return!0;var n=Z.call(t);switch(n){case rt:case ot:case st:case it:return!0}return!1}function s(t){return void 0!==t}function a(t){return null===t}function u(t){return void 0===t||null===t}function l(t){return Z.call(t)===et}function f(t){return Z.call(t)===it}function h(t){return Z.call(t)===ot}function d(t){return Z.call(t)===rt}function p(t){return Z.call(t)===ct}function v(t){return Z.call(t)===st}function g(t){return Z.call(t)===at}function m(t){return Z.call(t)===ut}function _(t){var n=Z.call(t);switch(n){case nt:case et:case st:case lt:return!0;default:if(t){var e=t.length;return h(e)&&(e?e>0&&e-1 in t:0===e)}return!1}}function b(t,n,e,i){var r=void 0,c=void 0;e=e||t;for(r in t)if(c=o(t,r),(i===!1||c)&&n.call(e,t[r],r,t,c)===!1)return!1;return!0}function y(t,n,e){var i=0,r=t.length;for(e=e||t;i<r;i++)if(n.call(e,t[i],i,t,!0)===!1)return!1;return!0}function w(t,n,e,i){return _(t)?y(t,n,e):!!u(t)||b(t,n,e,i)}function j(t,n,e,i){function r(t,e){o[e]=n.apply(this,arguments)}var o=void 0;return _(t)?(o=[],y(t,r,e)):(o={},u(t)||b(t,r,e,i)),o}function O(t,n,e,i){var r=void 0;return _(t)?(r=[],y(t,function(t){n.apply(this,arguments)&&r.push(t)},e)):(r={},u(t)||b(t,function(t,e){n.apply(this,arguments)&&(r[e]=t)},e,i)),r}function x(t,n,e,i,r){var o=e;return w(t,function(t,e,i,r){o=n.call(this,o,t,e,i,r)},i,r),o}function k(t,n,e,i){var r=[];return w(t,function(t,e){n&&!n.apply(this,arguments)||r.push(e)},e,i),r}function A(t,n){for(var e=0,i=t.length;e<i;e++)if(t[e]===n)return e;return-1}function C(t,n){for(var e=t.length;e-- >0;)if(t[e]===n)return e}function F(t,n,e){for(key in t)if((e===!1||o(t,key))&&t[key]===n)return key}function $(t,n,e){return _(t)?A(t,n):F(t,n,e)}function E(t,n,e){return _(t)?C(t,n):F(t,n,e)}function L(t,n,e,i,r){var o={};return w(t,function(t,i){o[n?n.apply(this,arguments):i]=e?e.apply(this,arguments):t},i,r),o}function N(t,n,e,i){var r={};return w(t,function(t,e){r[t]=n?n.apply(this,arguments):e},e,i),r}function P(t){return t.toUpperCase()}function T(t){return t.replace(ft,P)}function M(t){return t.replace(ht,"")}function D(t){return t.replace(dt,"")}function S(t){return t.replace(pt,"")}function q(t){var n=(t+"").split(".");return n[0]=n[0].replace(vt,"$1,"),n.join(".")}function z(t,n){if(l(t))return t;if(!v(t))return[];var e=function(){var e=gt[t];return e?{v:e}:(e=n?gt[t]=[]:[],t.replace(mt,function(t,n,i,r){e.push(i?r.replace(_t,"$1"):n||t)}),{v:e})}();return"object"==typeof e?e.v:void 0}function I(t,n,e,i,r){for(var c=0,s=z(n,!0),a=s.length-1,l=void 0;!u(t)&&c<a;){if(l=s[c++],r&&!o(t,l))return e;t=t[l]}return l=s[c],c==a&&!u(t)&&(r?o(t,l):l in t)?t[l]:e}function R(t,n,e,i){for(var r=0,c=z(n,!0),s=c.length-1,a=void 0;!u(t)&&r<s;){if(a=c[r++],i&&!o(t,a))return!1;t=t[a]}return a=c[r],r==s&&!u(t)&&(i?o(t,a):a in t)}function H(t,n,e){for(var i=0,r=z(n,!0),o=r.length-1,c=r[0],s=t;i<o;i++)s=u(s[c])?s[c]={}:s[c],c=r[i+1];return s[c]=e,t}function K(t,n){return o(t,n)?t[n]:void 0}function U(t){for(var n=void 0,e=void 0,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(e in n)o(n,e)&&!o(t,e)&&(t[e]=n[e])}return t}function G(){}function X(t,n){if(!f(t))return t instanceof n;for(var e=t;(e=bt(e))&&e!==Object;)if(e===n)return!0;return n===Object}function B(t){var n=function(){this.constructor.apply(this,arguments)},e=t.extend,i=void 0,r=void 0;return wt(n,Ot),f(e)&&e!==Object||(e=Ot),i=e.prototype,r=jt(i),n.superclass=i,n.prototype=r,yt(n,e),delete t.extend,n.extend(t)}function Y(t,n,e,i){var r=t.length,o=r>=n?"":Array(1+n-r>>>0).join(e);return i?t+o:o+t}function J(t,n){function e(t){return t=t?"*"==t?+n[r++]:"$"==t?+n[r]:"$"==t.charAt(t.length-1)?+n[t.slice(0,-1)-1]:+t:0,isFinite(t)?t<0?0:t:0}function i(t){return t&&"*"!=t?"$"==t?n[r]:n[t.slice(0,-1)-1]:n[r++]}var r=0;return t=t.replace(Ct,function(t,n,r,o,c,s){if("%"===s)return"%";var a=i(n);o=e(o),c=c&&e(c.slice(1)),c||0===c||(c="fFeE".indexOf(s)==-1?"d"==s?0:void 0:6),console.log("match:"+t+", index:"+n+"/"+a+", flags:"+r+", width:"+o+", prec:"+c+", type:"+s);var l=!1,f="",h=!1,d=!1,p=!1,v=void 0,g=void 0;switch(r&&w(r,function(t){switch(t){case" ":case"+":f=t;break;case"-":l=!0;break;case"0":h=!0;break;case"#":d=!0;break;case",":p=!0}}),s){case"c":return String.fromCharCode(+a);case"s":return u(a)&&!isNaN(a)?"":(a+="",c&&a.length>c&&(a=a.slice(0,c)),a.length<o&&(a=Y(a,o,h?"0":" ",!1)),a);case"d":return a=parseInt(a),isNaN(a)?"":(a<0?(v="-",a=-a):v=f,a+="",a.length<o&&(a=Y(a,o,"0",!1)),p&&(a=a.replace(Ft,"$1,")),v+a);case"e":case"E":case"f":case"g":case"G":case"p":case"P":var m=+a;if(isNaN(m))return"";m<0?(v="-",m=-m):v=f;var _=void 0,b=s.toLowerCase();if("p"!=b)_=["toExponential","toFixed","toPrecision"]["efg".indexOf(b)];else{var y=String(a).replace(/[eE].*|[^\d]/g,"");y=(m?y.replace(/^0+/,""):y).length,c&&(c=Math.min(c,y)),_=!c||c<=y?"toPrecision":"toExponential"}if(m=m[_](c),m.length<o&&(m=Y(m,o,"0",!1)),p){var j=m.split(".");j[0]=j[0].replace(Ft,"$1,"),m=j.join(".")}return a=v+m,"EGP".indexOf(s)!=-1?a.toUpperCase():a;case"b":g=2;break;case"o":g=8;break;case"u":g=10;break;case"x":case"X":g=16;break;case"n":return"";default:return t}var O=a>>>0;return v=d&&10!=g&&O&&["0b","0","0x"][g>>3]||"",O=O.toString(g),O.length<o&&(O=Y(O,o,"0",!1)),a=v+O,"X"==s?a.toUpperCase():a}),{format:t,count:r}}function Q(t){return J(t,Array.prototype.slice.call(arguments,1)).format}var V=void 0,W={request:t,cancel:n};window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||W.request,window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||W.cancel,e(Function,"bind",function(t){var n=this,e=Array.prototype.slice.call(arguments,1);return function(){return n.apply(t,e.concat(Array.prototype.slice.call(arguments)))}}),Object.freeze||(Object.freeze=function(t){return t});var Z=Object.prototype.toString,tt=Object.prototype.hasOwnProperty,nt="[object Arguments]",et="[object Array]",it="[object Function]",rt="[object Boolean]",ot="[object Number]",ct="[object Date]",st="[object String]",at="[object Object]",ut="[object RegExp]",lt="[object NodeList]",ft=/^[a-z]/,ht=/^\s+/,dt=/\s+$/,pt=/(^\s+)|(\s+$)/g,vt=/(\d)(?=(\d{3})+(?!\d))/g,gt={},mt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,_t=/\\(\\)?/g,bt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__},yt=Object.setPrototypeOf||function(t,n){t.__proto__=n},wt=Object.assign||function(t){for(var n=void 0,e=void 0,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(e in n)o(n,e)&&(t[e]=n[e])}return t},jt=Object.create||function(t,n){G.prototype=t;var e=new G;return G.prototype=void 0,n&&w(n,function(t,n){e[n]=t.value}),e},Ot=function(){},xt=[];wt(Ot.prototype,{super:function(t){var n=arguments.callee.caller;n.$owner.superclass[n.$name].apply(this,t||xt)},superclass:function(){var t=arguments.callee.caller;return t.$owner.superclass}}),wt(Ot,{extend:function(t){var n=this;return t&&!function(){var e=n.prototype;w(t,function(t,i){f(t)&&(t.$owner=n,t.$name=i),e[i]=t}),n.assign(t.statics)}(),this},assign:function(t){return t&&wt(this,t),this}});var kt=Object.freeze({overrideHasOwnProlicy:i,hasOwnProlicy:r,hasOwnProp:o,isPrimitive:c,isDefine:s,isNull:a,isNil:u,isArray:l,isFunc:f,isNumber:h,isBool:d,isDate:p,isString:v,isObject:g,isRegExp:m,isArrayLike:_,each:w,map:j,filter:O,aggregate:x,keys:k,indexOf:$,lastIndexOf:E,convert:L,reverseConvert:N,upperFirst:T,ltrim:M,rtrim:D,trim:S,thousandSeparate:q,parseExpr:z,get:I,has:R,set:H,getOwnProp:K,prototypeOf:bt,setPrototypeOf:yt,assign:wt,assignIf:U,emptyFunc:G,create:jt,isExtendOf:X,dynamicClass:B}),At=B({constructor:function(t){this.cfg=t||{}},register:function(t,n){var e=this;return 1==arguments.length?w(t,function(t,n){e.cfg[n]=t}):this.cfg[t]=n,this},config:function(t){var n=this;return t&&w(this.cfg,function(e,i){o(t,i)&&(n.cfg[i]=t[i])}),this},get:function(t){return arguments.length?this.cfg[t]:jt(this.cfg)}}),Ct=/%(\d+\$|\*|\$)?([-+#0, ]*)?(\d+\$?|\*|\$)?(\.\d+\$?|\.\*|\.\$)?([%sfducboxXeEgGpP])/g,Ft=/(\d)(?=(\d{3})+(?!\d))/g;Q.format=J;var $t=["debug","info","warn","error"],Et=document.createElement("div"),Lt=Array.prototype.slice,Nt=B({constructor:function(){Et.innerHTML='<div id="simulation_console"\n    style="position:absolute; top:0; right:0; font-family:courier,monospace; background:#eee; font-size:10px; padding:10px; width:200px; height:200px;">\n  <a style="float:right; padding-left:1em; padding-bottom:.5em; text-align:right;">Clear</a>\n  <div id="simulation_console_body"></div>\n</div>',this.el=Et.childNodes[0],this.clearEl=this.el.childNodes[0],this.bodyEl=this.el.childNodes[1]},appendTo:function(t){t.appendChild(this.el)},log:function(t,n){Et.innerHTML='<span style="'+t+'">'+n+"</span>",this.bodyEl.appendChild(Et.childNodes[0])},parseMsg:function(t){var n=t[0];if(v(n)){var e=Q.format.apply(null,t);return[e.format].concat(Lt.call(t,e.count)).join(" ")}return t.join(" ")},debug:function(){this.log("color: red;",this.parseMsg(arguments))},info:function(){this.log("color: red;",this.parseMsg(arguments))},warn:function(){this.log("color: red;",this.parseMsg(arguments))},error:function(){this.log("color: red;",this.parseMsg(arguments))},clear:function(){this.bodyEl.innerHTML=""}}),Pt=window.console;Pt&&!Pt.debug&&(Pt.debug=function(){Function.apply.call(Pt.log,Pt,arguments)});var Tt=B({statics:{enableSimulationConsole:function(){Pt||(Pt=new Nt,Pt.appendTo(document.body))}},constructor:function(t,n){this.module=t,this.level=$($t,n||"info")},setLevel:function(t){this.level=$($t,t||"info")},getLevel:function(){return $t[this.level]},_print:function(t,n,e){Function.apply.call(Pt[t],Pt,n),e&&Pt.trace&&Pt.trace()},_log:function(t,n,e){if(!(t<this.level)&&Pt){var i="[%s] %s -"+(v(n[0])?" "+n.shift():""),r=[];n=O(n,function(t){return!(t instanceof Error)||(r.push(t),!1)}),w(r,function(t){n.push.call(n,t.message,"\n",t.stack)}),t=$t[t],this._print(t,[i,t,this.module].concat(n),e)}},debug:function(){this._log(0,Lt.call(arguments,0))},info:function(){this._log(1,Lt.call(arguments,0))},warn:function(){this._log(2,Lt.call(arguments,0))},error:function(){this._log(3,Lt.call(arguments,0))}});Tt.logger=new Tt("default","info");var Mt=1,Dt=B({statics:{ListKey:"__UTILITY_LIST__"},constructor:function(){this._id=Mt++,this.length=0,this._header=void 0,this._tail=void 0,this._version=1},_listObj:function(t){return o(t,Dt.ListKey)&&t[Dt.ListKey]},_desc:function(t){var n=this._listObj(t);return n&&n[this._id]},_getOrCreateDesc:function(t){var n=this._listObj(t)||(t[Dt.ListKey]={}),e=n[this._id];return e||(n[this._id]={obj:t,prev:void 0,next:void 0,version:this._version++})},_unlink:function(t){var n=t.prev,e=t.next;n?n.next=e:this._header=e,e?e.prev=n:this._tail=n,this.length--},_move:function(t,n,e){var i=this._header;(i===t||t.prev)&&this._unlink(t),t.prev=n,n?(t.next=n.next,n.next=t):(t.next=i,i&&(i.prev=t),this._header=t),this._tail===n&&(this._tail=t),this.length++},_remove:function(t){var n=t.obj,e=this._listObj(n);this._unlink(t),delete e[this._id]},push:function(t){return this.last(t)},pop:function(){var t=this._header;if(t)return this._remove(t),t.obj},shift:function(){var t=this._tail;if(t)return this._remove(t),t.obj},first:function(t){if(0==arguments.length){var n=this._header;return n&&n.obj}return this._move(this._getOrCreateDesc(t),void 0),this},last:function(t){if(0==arguments.length){var n=this._tail;return n&&n.obj}return this._move(this._getOrCreateDesc(t),this._tail),this},before:function(t,n){if(1==arguments.length){var e=this._desc(t),i=e&&e.prev;return i&&i.obj}return this._move(this._getOrCreateDesc(t),this._desc(n).prev),this},after:function(t,n){if(1==arguments.length){var e=this._desc(t),i=e&&e.next;return i&&i.obj}return this._move(this._getOrCreateDesc(t),this._desc(n)),this},contains:function(t){return!!this._desc(t)},remove:function(t){var n=this._listObj(t),e=void 0;return!(!n||!(e=n[this._id]))&&(this._unlink(e),delete n[this._id],!0)},clean:function(){for(var t=this._header;t;)delete this._listObj(t.obj)[this._id],t=t.next;return this._header=void 0,this._tail=void 0,this.length=0,this},empty:function(){return 0==this.length},size:function(){return this.length},each:function(t,n){for(var e=this._header,i=this._version;e;){if(e.version<i&&t.call(n||this,e.obj,this)===!1)return!1;e=e.next}return!0},map:function(t,n){var e=this,i=[];return this.each(function(r){i.push(t.call(n||e,r,e))}),i},filter:function(t,n){var e=this,i=[];return this.each(function(r){t.call(n||e,r,e)&&i.push(r)}),i},toArray:function(){var t=[];return this.each(function(n){t.push(n)}),t}}),St=U({format:Q,timeoutframe:W,Configuration:At,Logger:Tt,LinkedList:Dt},kt);return St});
//# sourceMappingURL=utility.min.js.map