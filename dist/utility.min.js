!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define("utility",n):t.utility=n()}(this,function(){function t(t){var n=(new Date).getTime(),e=Math.max(0,16-(n-V)),i=setTimeout(function(){t(n+e)},e);return V=n+e,i}function n(t){clearTimeout(t)}function e(t,n,e){t.prototype[n]||(t.prototype[n]=e)}function i(t){f(t)&&(tt=t)}function r(){return tt}function o(t,n){return tt.call(t,n)}function c(t){if(null===t||void 0===t)return!0;var n=Z.call(t);switch(n){case rt:case ot:case st:case it:return!0}return!1}function s(t){return void 0!==t}function a(t){return null===t}function u(t){return void 0===t||null===t}function l(t){return Z.call(t)===et}function f(t){return Z.call(t)===it}function h(t){return Z.call(t)===ot}function d(t){return Z.call(t)===rt}function p(t){return Z.call(t)===ct}function v(t){return Z.call(t)===st}function g(t){return Z.call(t)===at}function m(t){return Z.call(t)===ut}function _(t){var n=Z.call(t);switch(n){case nt:case et:case st:case lt:return!0;default:if(t){var e=t.length;return h(e)&&(e?e>0&&e-1 in t:0===e)}return!1}}function b(t,n,e,i){var r=void 0,c=void 0;e=e||t;for(r in t)if(c=o(t,r),(i===!1||c)&&n.call(e,t[r],r,t,c)===!1)return!1;return!0}function y(t,n,e){var i=0,r=t.length;for(e=e||t;i<r;i++)if(n.call(e,t[i],i,t,!0)===!1)return!1;return!0}function w(t,n,e,i){return _(t)?y(t,n,e):!!u(t)||b(t,n,e,i)}function j(t,n,e,i){function r(t,e){o[e]=n.apply(this,arguments)}var o=void 0;return _(t)?(o=[],y(t,r,e)):(o={},u(t)||b(t,r,e,i)),o}function O(t,n,e,i){var r=void 0;return _(t)?(r=[],y(t,function(t){n.apply(this,arguments)&&r.push(t)},e)):(r={},u(t)||b(t,function(t,e){n.apply(this,arguments)&&(r[e]=t)},e,i)),r}function x(t,n,e,i,r){var o=e;return w(t,function(t,e,i,r){o=n.call(this,o,t,e,i,r)},i,r),o}function k(t,n,e,i){var r=[];return w(t,function(t,e){n&&!n.apply(this,arguments)||r.push(e)},e,i),r}function A(t,n){for(var e=0,i=t.length;e<i;e++)if(t[e]===n)return e;return-1}function C(t,n){for(var e=t.length;e-- >0;)if(t[e]===n)return e}function F(t,n,e){for(key in t)if((e===!1||o(t,key))&&t[key]===n)return key}function E(t,n,e){return _(t)?A(t,n):F(t,n,e)}function L(t,n,e){return _(t)?C(t,n):F(t,n,e)}function P(t,n,e,i,r){var o={};return w(t,function(t,i){o[n?n.apply(this,arguments):i]=e?e.apply(this,arguments):t},i,r),o}function N(t,n,e,i){var r={};return w(t,function(t,e){r[t]=n?n.apply(this,arguments):e},e,i),r}function M(t){return t.toUpperCase()}function T(t){return t.replace(ft,M)}function $(t){return t.replace(ht,"")}function S(t){return t.replace(dt,"")}function D(t){return t.replace(pt,"")}function q(t,n,e,i){var r=t.length>=n?"":Array(1+n-t.length>>>0).join(e);return i?t+r:r+t}function z(t,n,e,i,r){var o=i-t.length;return o>0?e||!r?q(t,i," ",e):t.slice(0,n.length)+q("",o,"0",!0)+t.slice(n.length):t}function I(t){return R(t,Array.prototype.slice.call(arguments,1)).format}function R(t,n){var e=0;return t=t.replace(vt,function(t,i,r,o,c,s,a){if("%%"==t)return"%";var u=!1,l="",f=!1,h=!1;if(r&&w(r,function(t){switch(t){case" ":l=" ";break;case"+":l="+";break;case"-":u=!0;break;case"0":f=!0;break;case"#":h=!0}}),o=o?"*"==o?+n[e++]:"*"==o.charAt(0)?+n[o.slice(1,-1)]:+o:0,o<0&&(o=-o,u=!0),!isFinite(o))throw new Error("sprintf: (minimum-)width must be finite");s&&"*"==s.charAt(0)&&(s=+n["*"==s?e++:s.slice(1,-1)],s<0&&(s=null)),s=null==s?"fFeE".indexOf(a)>-1?6:"d"==a?0:void 0:+s;var d=i?n[i.slice(0,-1)]:n[e++],p=void 0,v=void 0;switch(a){case"c":d=String.fromCharCode(+d);case"s":d=String(d),null!=s&&(d=d.slice(0,s)),p="";break;case"b":v=2;break;case"o":v=8;break;case"u":v=10;break;case"x":case"X":v=16;break;case"i":case"d":var g=parseInt(+d);if(isNaN(g))return"";p=g<0?"-":l,d=p+q(String(Math.abs(g)),s,"0",!1);break;case"e":case"E":case"f":case"F":case"g":case"G":case"p":case"P":var m=+d;if(isNaN(m))return"";p=m<0?"-":l;var _=void 0;if("p"!=a.toLowerCase())_=["toExponential","toFixed","toPrecision"]["efg".indexOf(a.toLowerCase())];else{var b=String(d).replace(/[eE].*|[^\d]/g,"");b=(m?b.replace(/^0+/,""):b).length,s=s?Math.min(s,b):s,_=!s||s<=b?"toPrecision":"toExponential"}var y=Math.abs(m)[_](s);d=p+y;break;case"n":return"";default:return t}if(v){var j=d>>>0;p=h&&10!=v&&j&&["0b","0","0x"][v>>3]||"",d=p+q(j.toString(v),s||0,"0",!1)}var O=z(d,p,u,o,f);return"EFGPX".indexOf(a)>-1?O.toUpperCase():O}),{format:t,formatArgCount:e}}function H(t,n){if(l(t))return t;if(!v(t))return[];var e=function(){var e=gt[t];return e?{v:e}:(e=n?gt[t]=[]:[],t.replace(mt,function(t,n,i,r){e.push(i?r.replace(_t,"$1"):n||t)}),{v:e})}();return"object"==typeof e?e.v:void 0}function K(t,n,e,i,r){for(var c=0,s=H(n,!0),a=s.length-1,l=void 0;!u(t)&&c<a;){if(l=s[c++],r&&!o(t,l))return e;t=t[l]}return l=s[c],c==a&&!u(t)&&(r?o(t,l):l in t)?t[l]:e}function G(t,n,e,i){for(var r=0,c=H(n,!0),s=c.length-1,a=void 0;!u(t)&&r<s;){if(a=c[r++],i&&!o(t,a))return!1;t=t[a]}return a=c[r],r==s&&!u(t)&&(i?o(t,a):a in t)}function U(t,n,e){for(var i=0,r=H(n,!0),o=r.length-1,c=r[0],s=t;i<o;i++)s=u(s[c])?s[c]={}:s[c],c=r[i+1];return s[c]=e,t}function X(t,n){return o(t,n)?t[n]:void 0}function B(t){for(var n=void 0,e=void 0,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(e in n)o(n,e)&&!o(t,e)&&(t[e]=n[e])}return t}function Y(){}function J(t,n){if(!f(t))return t instanceof n;for(var e=t;(e=bt(e))&&e!==Object;)if(e===n)return!0;return n===Object}function Q(t){var n=function(){this.constructor.apply(this,arguments)},e=t.extend,i=void 0,r=void 0;return wt(n,Ot),f(e)&&e!==Object||(e=Ot),i=e.prototype,r=jt(i),n.superclass=i,n.prototype=r,yt(n,e),delete t.extend,n.extend(t)}var V=void 0,W={request:t,cancel:n};window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||W.request,window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||W.cancel,e(Function,"bind",function(t){var n=this,e=Array.prototype.slice.call(arguments,1);return function(){return n.apply(t,e.concat(Array.prototype.slice.call(arguments)))}}),Object.freeze||(Object.freeze=function(t){return t});var Z=Object.prototype.toString,tt=Object.prototype.hasOwnProperty,nt="[object Arguments]",et="[object Array]",it="[object Function]",rt="[object Boolean]",ot="[object Number]",ct="[object Date]",st="[object String]",at="[object Object]",ut="[object RegExp]",lt="[object NodeList]",ft=/^[a-z]/,ht=/^\s+/,dt=/\s+$/,pt=/(^\s+)|(\s+$)/g,vt=/%%|%(\d+\$)?([-+#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuidfegpEGP])/g,gt={},mt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,_t=/\\(\\)?/g,bt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__},yt=Object.setPrototypeOf||function(t,n){t.__proto__=n},wt=Object.assign||function(t){for(var n=void 0,e=void 0,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(e in n)o(n,e)&&(t[e]=n[e])}return t},jt=Object.create||function(t,n){Y.prototype=t;var e=new Y;return Y.prototype=void 0,n&&w(n,function(t,n){e[n]=t.value}),e},Ot=function(){},xt=[];wt(Ot.prototype,{super:function(t){var n=arguments.callee.caller;n.$owner.superclass[n.$name].apply(this,t||xt)},superclass:function(){var t=arguments.callee.caller;return t.$owner.superclass}}),wt(Ot,{extend:function(t){var n=this;return t&&!function(){var e=n.prototype;w(t,function(t,i){f(t)&&(t.$owner=n,t.$name=i),e[i]=t}),n.assign(t.statics)}(),this},assign:function(t){return t&&wt(this,t),this}});var kt=Object.freeze({overrideHasOwnProlicy:i,hasOwnProlicy:r,hasOwnProp:o,isPrimitive:c,isDefine:s,isNull:a,isNil:u,isArray:l,isFunc:f,isNumber:h,isBool:d,isDate:p,isString:v,isObject:g,isRegExp:m,isArrayLike:_,each:w,map:j,filter:O,aggregate:x,keys:k,indexOf:E,lastIndexOf:L,convert:P,reverseConvert:N,upperFirst:T,ltrim:$,rtrim:S,trim:D,format:I,_format:R,parseExpr:H,get:K,has:G,set:U,getOwnProp:X,prototypeOf:bt,setPrototypeOf:yt,assign:wt,assignIf:B,emptyFunc:Y,create:jt,isExtendOf:J,dynamicClass:Q}),At=Q({constructor:function(t){this.cfg=t||{}},register:function(t,n){var e=this;return 1==arguments.length?w(t,function(t,n){e.cfg[n]=t}):this.cfg[t]=n,this},config:function(t){var n=this;return t&&w(this.cfg,function(e,i){o(t,i)&&(n.cfg[i]=t[i])}),this},get:function(t){return arguments.length?this.cfg[t]:jt(this.cfg)}}),Ct=["debug","info","warn","error"],Ft=document.createElement("div"),Et=Array.prototype.slice,Lt=Q({constructor:function(){Ft.innerHTML='<div id="simulation_console"\n    style="position:absolute; top:0; right:0; font-family:courier,monospace; background:#eee; font-size:10px; padding:10px; width:200px; height:200px;">\n  <a style="float:right; padding-left:1em; padding-bottom:.5em; text-align:right;">Clear</a>\n  <div id="simulation_console_body"></div>\n</div>',this.el=Ft.childNodes[0],this.clearEl=this.el.childNodes[0],this.bodyEl=this.el.childNodes[1]},appendTo:function(t){t.appendChild(this.el)},log:function(t,n){Ft.innerHTML='<span style="'+t+'">'+n+"</span>",this.bodyEl.appendChild(Ft.childNodes[0])},parseMsg:function(t){var n=t[0];if(v(n)){var e=R.apply(null,t);return[e.format].concat(Et.call(t,e.formatArgCount)).join(" ")}return t.join(" ")},debug:function(){this.log("color: red;",this.parseMsg(arguments))},info:function(){this.log("color: red;",this.parseMsg(arguments))},warn:function(){this.log("color: red;",this.parseMsg(arguments))},error:function(){this.log("color: red;",this.parseMsg(arguments))},clear:function(){this.bodyEl.innerHTML=""}}),Pt=window.console;Pt&&!Pt.debug&&(Pt.debug=function(){Function.apply.call(Pt.log,Pt,arguments)});var Nt=Q({statics:{enableSimulationConsole:function(){Pt||(Pt=new Lt,Pt.appendTo(document.body))}},constructor:function(t,n){this.module=t,this.level=E(Ct,n||"info")},setLevel:function(t){this.level=E(Ct,t||"info")},getLevel:function(){return Ct[this.level]},_print:function(t,n,e){Function.apply.call(Pt[t],Pt,n),e&&Pt.trace&&Pt.trace()},_log:function(t,n,e){if(!(t<this.level)&&Pt){var i="[%s] %s -"+(v(n[0])?" "+n.shift():""),r=[];n=O(n,function(t){return!(t instanceof Error)||(r.push(t),!1)}),w(r,function(t){n.push.call(n,t.message,"\n",t.stack)}),t=Ct[t],this._print(t,[i,t,this.module].concat(n),e)}},debug:function(){this._log(0,Et.call(arguments,0))},info:function(){this._log(1,Et.call(arguments,0))},warn:function(){this._log(2,Et.call(arguments,0))},error:function(){this._log(3,Et.call(arguments,0))}});Nt.logger=new Nt("default","info");var Mt=1,Tt=Q({statics:{ListKey:"__UTILITY_LIST__"},constructor:function(){this._id=Mt++,this.length=0,this._header=void 0,this._tail=void 0,this._version=1},_listObj:function(t){return o(t,Tt.ListKey)&&t[Tt.ListKey]},_desc:function(t){var n=this._listObj(t);return n&&n[this._id]},_getOrCreateDesc:function(t){var n=this._listObj(t)||(t[Tt.ListKey]={}),e=n[this._id];return e||(n[this._id]={obj:t,prev:void 0,next:void 0,version:this._version++})},_unlink:function(t){var n=t.prev,e=t.next;n?n.next=e:this._header=e,e?e.prev=n:this._tail=n,this.length--},_move:function(t,n,e){var i=this._header;(i===t||t.prev)&&this._unlink(t),t.prev=n,n?(t.next=n.next,n.next=t):(t.next=i,i&&(i.prev=t),this._header=t),this._tail===n&&(this._tail=t),this.length++},_remove:function(t){var n=t.obj,e=this._listObj(n);this._unlink(t),delete e[this._id]},push:function(t){return this.last(t)},pop:function(){var t=this._header;if(t)return this._remove(t),t.obj},shift:function(){var t=this._tail;if(t)return this._remove(t),t.obj},first:function(t){if(0==arguments.length){var n=this._header;return n&&n.obj}return this._move(this._getOrCreateDesc(t),void 0),this},last:function(t){if(0==arguments.length){var n=this._tail;return n&&n.obj}return this._move(this._getOrCreateDesc(t),this._tail),this},before:function(t,n){if(1==arguments.length){var e=this._desc(t),i=e&&e.prev;return i&&i.obj}return this._move(this._getOrCreateDesc(t),this._desc(n).prev),this},after:function(t,n){if(1==arguments.length){var e=this._desc(t),i=e&&e.next;return i&&i.obj}return this._move(this._getOrCreateDesc(t),this._desc(n)),this},contains:function(t){return!!this._desc(t)},remove:function(t){var n=this._listObj(t),e=void 0;if(n&&(e=n[this._id]))return this._unlink(e),delete n[this._id],this},clean:function(){for(var t=this._header;t;)delete this._listObj(t.obj)[this._id],t=t.next;return this._header=void 0,this._tail=void 0,this.length=0,this},empty:function(){return 0==this.length},size:function(){return this.length},each:function(t,n){for(var e=this._header,i=this._version;e;){if(e.version<i&&t.call(n||this,e.obj,this)===!1)return!1;e=e.next}return!0},map:function(t,n){var e=this,i=[];return this.each(function(r){i.push(t.call(n||e,r,e))}),i},filter:function(t,n){var e=this,i=[];return this.each(function(r){t.call(n||e,r,e)&&i.push(r)}),i},toArray:function(){var t=[];return this.each(function(n){t.push(n)}),t}}),$t=B({timeoutframe:W,Configuration:At,Logger:Nt,LinkedList:Tt},kt);return $t});
//# sourceMappingURL=utility.min.js.map